
<!doctype html>
<html lang="hu" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Benedek Zoltán">
      
      
        <link rel="canonical" href="https://bmeviauab00.github.io/szoftvertechnikak/2024/labor/6-tervezesi-mintak/index_eng/">
      
      
        <link rel="prev" href="../../5-mvvm/index_eng/">
      
      
        <link rel="next" href="../../../hazi/index_eng/">
      
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>6. Design patterns (extensibility) - BMEVIAUAB00 Szoftvertechnikák</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../extra-material-theme.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="aut" data-md-color-primary="aut" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#6-design-patterns-extensibility" class="md-skip">
          Kihagyás
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Élőfej">
    <a href="../../.." title="BMEVIAUAB00 Szoftvertechnikák" class="md-header__button md-logo" aria-label="BMEVIAUAB00 Szoftvertechnikák" data-md-component="logo">
      
  <img src="../../../img/logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAB00 Szoftvertechnikák
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              6. Design patterns (extensibility)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="aut" data-md-color-primary="aut" data-md-color-accent="red"  aria-label="Váltás sötét témára"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Váltás sötét témára" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="indigo"  aria-label="Váltás világos témára"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Váltás világos témára" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Keresés" placeholder="Keresés" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Keresés">
        
        <button type="reset" class="md-search__icon md-icon" title="Törlés" aria-label="Törlés" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Keresés inicializálása
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bmeviauab00/szoftvertechnikak" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauab00/szoftvertechnikak
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Lapok" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Szoftvertechnikák (2024-től)

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../1-model-es-kod-kapcsolata/" class="md-tabs__link">
          
  
  Laborok

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/" class="md-tabs__link">
          
  
  Önálló/házi feladatok

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-model-es-kod-kapcsolata/index_eng/" class="md-tabs__link">
          
  
  English course labs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/index_eng/" class="md-tabs__link">
          
  
  Homework

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../1-model-es-kod-kapcsolata/index_ger/" class="md-tabs__link">
          
  
  Deutschkurs-Labore

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/meghirdetes-elott_ger/" class="md-tabs__link">
          
  
  Hausaufgaben

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigáció" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="BMEVIAUAB00 Szoftvertechnikák" class="md-nav__button md-logo" aria-label="BMEVIAUAB00 Szoftvertechnikák" data-md-component="logo">
      
  <img src="../../../img/logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAB00 Szoftvertechnikák
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bmeviauab00/szoftvertechnikak" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauab00/szoftvertechnikak
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Szoftvertechnikák (2024-től)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Laborok
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Laborok
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. A modell és a kód kapcsolata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Nyelvi eszközök
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. A felhasználói felület kialakítása
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Többszálú alkalmazások készítése
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-mvvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Tervezési minták (kiterjeszthetőség)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-adatkezeles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Adatkezelés
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Önálló/házi feladatok
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Önálló/házi feladatok
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Útmutató
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/1-model-es-kod-kapcsolata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. HF - A modell és a kód kapcsolata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/2-nyelvi-eszkozok/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. HF - Nyelvi eszközök
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. HF - Felhasználói felület kialakítása
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/4-tobbszalu-alkalmazasok-fejlesztese/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. HF - Többszálú alkalmazások fejlesztése
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/5-mvvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. HF - MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/6-tervezesi-mintak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. HF - Tervezési minták
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/imsc-liftsystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HF - Liftrendszer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fejlesztőkörnyezet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    English course labs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            English course labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. The relationship between the model and the code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Language tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. The design of the user interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Developing multithreaded applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-mvvm/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    6. Design patterns (extensibility)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    6. Design patterns (extensibility)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-aim-of-the-laboratory" class="md-nav__link">
    <span class="md-ellipsis">
      The aim of the laboratory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theoretical-background-and-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Theoretical background and approach *
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-0-getting-familiar-with-the-assignment-and-the-starter-application" class="md-nav__link">
    <span class="md-ellipsis">
      Task 0 – Getting familiar with the assignment and the starter application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 0 – Getting familiar with the assignment and the starter application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-description" class="md-nav__link">
    <span class="md-ellipsis">
      Task description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initial-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Initial requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-1-all-in-one-1-startstart" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 1 - All-in-one (1-Start/Start)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-2-2-organizedtofunctionsorganizedtofunctions-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 2 (2-OrganizedToFunctions/OrganizedToFunctions-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 2 (2-OrganizedToFunctions/OrganizedToFunctions-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-3-organizedtofunctions-2-twoalgorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 3 (OrganizedToFunctions-2-TwoAlgorithms)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 3 (OrganizedToFunctions-2-TwoAlgorithms)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-4-3-templatemethodtemplatemethod-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 4 (3-TemplateMethod/TemplateMethod-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 4 (3-TemplateMethod/TemplateMethod-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-5-3-templatemethodtemplatemethod-2-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 5 (3-TemplateMethod/TemplateMethod-2-Progress)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-6-3-templatemethodtemplatemethod-3-progressmultiple" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 6 (3-TemplateMethod/TemplateMethod-3-ProgressMultiple)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-7-4-strategystrategy-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 7 (4-Strategy/Strategy-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 7 (4-Strategy/Strategy-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anonymization-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Anonymization strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#progress-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Progress strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-the-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Applying the strategies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_3" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-8-4-strategystrategy-2-di" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 8 (4-Strategy/Strategy-2-DI)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 8 (4-Strategy/Strategy-2-DI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_4" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-adatkezeles/index_eng.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Homework
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Homework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/1-model-es-kod-kapcsolata/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. HW - The relationship between the model and the code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/2-nyelvi-eszkozok/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. HW - Language tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. HW - Implementing the user interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/4-tobbszalu-alkalmazasok-fejlesztese/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. HW - Developing multithreaded applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/5-mvvm/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. HW - MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. HW - Design patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HW - Liftsystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development environment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deutschkurs-Labore
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Deutschkurs-Labore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Beziehung zwischen dem Modell und dem Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Sprachliche Mittel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entwurf der Benutzeroberfläche
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Erstellung von mehrfädigen Anwendungen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-mvvm/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Entwurfsmuster (Erweiterbarkeit)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-adatkezeles/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Datenverwaltung
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hausaufgaben
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Hausaufgaben
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Beziehung zwischen dem Modell und dem Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Sprachliche Mittel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entwurf der Benutzeroberfläche
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/4-tobbszalu-alkalmazasok-fejlesztese/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Entwicklung von Multithreading-Anwendungen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/5-mvvm/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/6-tervezesi-mintak/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Entwurfsmuster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entwicklungsumgebung
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-aim-of-the-laboratory" class="md-nav__link">
    <span class="md-ellipsis">
      The aim of the laboratory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theoretical-background-and-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Theoretical background and approach *
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-0-getting-familiar-with-the-assignment-and-the-starter-application" class="md-nav__link">
    <span class="md-ellipsis">
      Task 0 – Getting familiar with the assignment and the starter application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 0 – Getting familiar with the assignment and the starter application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#task-description" class="md-nav__link">
    <span class="md-ellipsis">
      Task description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initial-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Initial requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-1-all-in-one-1-startstart" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 1 - All-in-one (1-Start/Start)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-2-2-organizedtofunctionsorganizedtofunctions-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 2 (2-OrganizedToFunctions/OrganizedToFunctions-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 2 (2-OrganizedToFunctions/OrganizedToFunctions-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-3-organizedtofunctions-2-twoalgorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 3 (OrganizedToFunctions-2-TwoAlgorithms)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 3 (OrganizedToFunctions-2-TwoAlgorithms)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-4-3-templatemethodtemplatemethod-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 4 (3-TemplateMethod/TemplateMethod-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 4 (3-TemplateMethod/TemplateMethod-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-5-3-templatemethodtemplatemethod-2-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 5 (3-TemplateMethod/TemplateMethod-2-Progress)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-6-3-templatemethodtemplatemethod-3-progressmultiple" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 6 (3-TemplateMethod/TemplateMethod-3-ProgressMultiple)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-7-4-strategystrategy-1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 7 (4-Strategy/Strategy-1)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 7 (4-Strategy/Strategy-1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anonymization-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Anonymization strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#progress-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Progress strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-the-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Applying the strategies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_3" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solution-8-4-strategystrategy-2-di" class="md-nav__link">
    <span class="md-ellipsis">
      Solution 8 (4-Strategy/Strategy-2-DI)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solution 8 (4-Strategy/Strategy-2-DI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluation-of-the-solution_4" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation of the solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/bmeviauab00/szoftvertechnikak/edit/master/docs/labor/6-tervezesi-mintak/index_eng.md" title="Oldal szerkesztése" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="6-design-patterns-extensibility">6. Design patterns (extensibility)<a class="headerlink" href="#6-design-patterns-extensibility" title="Permanent link">&para;</a></h1>
<h2 id="the-aim-of-the-laboratory">The aim of the laboratory<a class="headerlink" href="#the-aim-of-the-laboratory" title="Permanent link">&para;</a></h2>
<p>The goals of this laboratory (based on a more complex, real-life example):</p>
<ul>
<li>Practicing some basic design principles that support extensibility, reusability, code clarity, and maintainability: SRP, OPEN-CLOSED, DRY, KISS, etc.</li>
<li>Applying design patterns most closely related to extensibility (Template Method, Strategy, Dependency Injection).</li>
<li>Practicing and combining additional techniques that support extensibility and reusability (e.g. delegate/lambda expressions) with design patterns.</li>
<li>Practicing code refactoring.</li>
</ul>
<p>Related lectures:</p>
<ul>
<li>Design patterns: patterns related to extensibility (introduction, Template Method, Strategy), as well as the “pattern” of Dependency Injection.</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Tools required for completing the laboratory:</p>
<ul>
<li>Visual Studio 2022</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Laboratory on Linux or macOS</p>
<p>The material for this laboratory is primarily intended for Windows and Visual Studio, but it can also be completed on other operating systems with different development tools (e.g., VS Code, Rider, Visual Studio for Mac), or even with a simple text editor and CLI tools. This is made possible by the fact that the examples are presented in the context of a simple Console application (no Windows-specific elements), and the .NET 8 SDK is supported on Linux and macOS. <a href="https://learn.microsoft.com/en-us/dotnet/core/tutorials/with-visual-studio-code">Hello World on Linux</a>.</p>
</div>
<h3 id="theoretical-background-and-approach">Theoretical background and approach *<a class="headerlink" href="#theoretical-background-and-approach" title="Permanent link">&para;</a></h3>
<p>When developing more complex applications, we face numerous design decisions where we must choose from various options. If we do not consider maintainability and extensibility during these decisions, development can quickly become a nightmare. Client requests for changes and enhancements often require large-scale code rewrites/modifications, which can introduce new bugs and require significant effort for retesting the codebase.</p>
<p>Our goal is to implement such change and extension requirements by extending the code at a few well-defined points — without significantly modifying existing code. The keyword is: <strong>extension</strong> instead of <strong>modification</strong>. Relatedly, if certain logic is extensible, it will also be more general, and can be reused more easily in multiple contexts. In the long run, this leads to faster progress, shorter code, and avoids code duplication (which also improves maintainability).</p>
<p><strong>Design patterns</strong> provide proven solutions to common design problems: they help make our code more extensible, maintainable, and as reusable as possible. This laboratory focuses on those patterns, design principles, and programming tools that address the above issues. However, we should avoid overengineering: only apply a design pattern if it provides real benefits in a given case. Otherwise, it just adds unnecessary complexity. In this spirit, our goal is not (and often not even possible) to foresee every future extensibility need. The key is to start from a simple solution, recognize issues as they arise, and continuously refactor our code to meet current (functional and non-functional) requirements and improve extensibility and reusability where appropriate.</p>
<p>It’s also worth noting that related design patterns and language tools can greatly assist in making our code <strong>unit testable</strong>: in many companies, it's a (justified) basic expectation during software development that developers write unit tests with high code coverage. However, achieving this is practically impossible if the units/classes in our code are too tightly coupled.</p>
<h2 id="task-0-getting-familiar-with-the-assignment-and-the-starter-application">Task 0 – Getting familiar with the assignment and the starter application<a class="headerlink" href="#task-0-getting-familiar-with-the-assignment-and-the-starter-application" title="Permanent link">&para;</a></h2>
<p>Clone the starting application repository for Lab 6 from the following <a href="https://github.com/bmeviauab00/lab-patterns-extensibility-kiindulo">repository</a>:</p>
<ul>
<li>Open a command prompt</li>
<li>Navigate to any folder, for example: <code>c:\work\NEPTUN</code></li>
<li>Run the following command: <code>git clone https://github.com/bmeviauab00/lab-patterns-extensibility-kiindulo.git</code></li>
<li>Open the <em>Lab-Patterns-Extensibility.sln</em> solution in Visual Studio.</li>
</ul>
<h3 id="task-description">Task description<a class="headerlink" href="#task-description" title="Permanent link">&para;</a></h3>
<p>During this lab, we will work on a console-based data processing (more precisely, anonymizing) application, making it extensible in different ways using various techniques, in response to continuously evolving requirements. As part of the first task, we’ll also get familiar with the concept of anonymization.</p>
<p>The input of the application is a CSV text file, where each line contains data related to a particular person. Open the <em>us-500.csv</em> file in the <em>Data</em> folder of the filesystem (double-click it or open with Notepad). You will see the data of individuals listed in quotes and separated by commas (note: these are not real individuals). Let’s look at the first line:</p>
<div class="highlight"><pre><span></span><code>&quot;James&quot;,&quot;Rhymes&quot;,&quot;Benton, John B Jr&quot;,&quot;6649 N Blue Gum St&quot;,&quot;New Orleans &quot;,&quot;Orleans&quot;,&quot;LA&quot;,&quot;70116&quot;,&quot;504-621-8927&quot;,&quot;504-845-1427&quot;,&quot;30&quot;,&quot;65&quot;,&quot;Heart-related&quot;,&quot;jRhymes@gmail.com&quot;
</code></pre></div>
<p>The first person in the data row is named James Rhymes and works at the company "Benton, John B Jr". The next few fields represent address-related data. He is 30 years old and weighs 65 kg. The following field describes a more serious illness (in this case, "Heart-related"). The last column contains the person's email address.</p>
<details class="note">
<summary>Source and exact format of the data *</summary>
<p>The data source is: <a href="https://www.briandunning.com/sample-data/">https://www.briandunning.com/sample-data/</a>, with a few extra fields added (age, weight, illness). The field order is: First Name, Last Name, Company, Address, City, County (where applicable), State/Province (where applicable), ZIP/Postal Code, Phone 1, Phone 2, Age, Weight, Illness, Email.</p>
</details>
<p>The primary function of the application is to anonymize these records based on the current requirements and write the results to an output CSV text file. The goal of anonymization is to transform the data in such a way that individuals cannot be identified, while still allowing for meaningful reporting. Anonymization is a distinct, serious, and challenging area in data processing. In this lab, our goal is not to develop solutions that are usable in real-world environments or entirely meaningful. The main focus is on applying a data processing algorithm to demonstrate software design patterns. This provides a more engaging context than simple data filtering/sorting/etc., which .NET already supports natively.</p>
<div class="admonition note">
<p class="admonition-title">A few thoughts about anonymization</p>
<p>At first glance, anonymization might seem like a simple problem. For example, one might think it's enough to remove or mask people's names, street addresses, phone numbers, and email addresses. For example, for the first row of our input, the output might look like this:</p>
<div class="highlight"><pre><span></span><code>&quot;***&quot;,&quot;***&quot;,&quot;Benton, John B Jr&quot;,&quot;***&quot;,&quot;New Orleans &quot;,&quot;Orleans&quot;,&quot;LA&quot;,&quot;70116&quot;,&quot;***&quot;,&quot;***&quot;,&quot;30&quot;,&quot;65&quot;,&quot;Heart-related&quot;,&quot;***&quot;
</code></pre></div>
<p>But it’s not that simple, especially when dealing with large amounts of data. Imagine a small village where only a few people live. Suppose an anonymized person is 14 years old and weighs 95 kg. This is a rare ‘combination’, there is a good chance that no other person with these parameters lives in the village. If one of his classmates (an eighth grader, he is 14) looks at the ‘anonymised’ data, he will know who he is (there is no other eighth grader in the school who is that overweight), he will identify the person. So, for example, you he/she will know what illness the person has. Lesson: data can be revealing in context.</p>
<p>So, what’s the solution? We can’t just remove or mask the city, age, or weight because we need them for reporting. A common approach is to generalize the data instead of showing exact values. For example, instead of showing an exact age or weight, we show a range (e.g., 10–20 years, 80–100 kg). This way, individuals cannot be identified. We will also use this technique later on.</p>
</div>
<h3 id="initial-requirements">Initial requirements<a class="headerlink" href="#initial-requirements" title="Permanent link">&para;</a></h3>
<p>The initial requirements for the application are:</p>
<ol>
<li>Files received from a specific client (all with the same format) must be converted using the same anonymizing algorithm into the same output format. The anonymization should simply involve "masking" the first and last names.</li>
<li>Some data cleaning is needed. There may be unnecessary <code>_</code> and <code>#</code> characters at the beginning or end of the city field in the input data, and these should be removed (trim operation).</li>
<li>After processing each row, the application must print to the console that the row has been processed, and after processing all the data, some summary information should be displayed: how many rows were processed and how many required trimming of the city name.</li>
<li><strong>Key aspect</strong>: The application will be used only for a short period and is not intended to be expanded later.</li>
</ol>
<p>Note: In order to work with fewer fields in the code and to make the output clearer, a few fields will be omitted during processing.</p>
<p>For example, the expected output for the first row of our input file would be:</p>
<div class="highlight"><pre><span></span><code>***; ***; LA; New Orleans; 30; 65; Heart-related
</code></pre></div>
<h2 id="solution-1-all-in-one-1-startstart">Solution 1 - All-in-one (1-Start/Start)<a class="headerlink" href="#solution-1-all-in-one-1-startstart" title="Permanent link">&para;</a></h2>
<p>In the Visual Studio Solution Explorer, we see folders named with numbers 1 through 4. These contain the solutions for each iteration of work. The first solution is located in the "1-Start" folder under the project name "Start". Let’s take a look at the files in the project:</p>
<ul>
<li><code>Person.cs</code> - Contains the data of a person that is of interest to us. We read each person’s data into objects of this class.</li>
<li><code>Program.cs</code> - The main function is implemented here, with all the logic, "separated" by code comments. If the logic becomes more complicated, even after a few days (or hours), we might struggle to understand our own code. Let’s not focus on this solution.</li>
</ul>
<p>Overall, the solution is very simple since we don’t foresee a long future for the code. However, the “script-like,” “all-in-one” solution that puts everything in one function is still not the best direction. It makes the code <strong>hard to understand</strong> and <strong>difficult to follow</strong>. Let’s not delve into this further.</p>
<h2 id="solution-2-2-organizedtofunctionsorganizedtofunctions-1">Solution 2 (2-OrganizedToFunctions/OrganizedToFunctions-1)<a class="headerlink" href="#solution-2-2-organizedtofunctionsorganizedtofunctions-1" title="Permanent link">&para;</a></h2>
<p>Let’s move on to the solution found in the "2-OrganizedToFunctions" folder, in the project "OrganizedToFunctions-1" in Visual Studio. This solution is much more appealing because we have split the logic into functions. Let’s review the code briefly:</p>
<p><code>Anonymizer.cs</code></p>
<ul>
<li>The <code>Run</code> function is the "backbone" and contains the control logic. It calls the functions responsible for each step.</li>
<li><code>ReadFromInput</code>: This function reads the source file, creates a <code>Person</code> object for each line, and returns a list of the read <code>Person</code> objects.</li>
<li><code>TrimCityNames</code>: It performs data cleaning (trimming the city names).</li>
<li><code>Anonymize</code>: It’s called for each <code>Person</code> object read and is responsible for returning a new <code>Person</code> object with anonymized data.</li>
<li><code>WriteToOutput</code>: Writes the anonymized <code>Person</code> objects to the output file.</li>
<li><code>PrintSummary</code>: Prints the summary of the process to the console at the end.</li>
</ul>
<p><code>Program.cs</code></p>
<ul>
<li>Creates an <code>Anonymizer</code> object and runs it with the <code>Run</code> function. Notice that the string used for masking in the anonymization process is provided as a constructor parameter.</li>
</ul>
<p>Let’s try running it! Set "OrganizedToFunctions-1" as the startup project in Visual Studio (right-click and <em>Set as Startup Project</em>), then run it:</p>
<p><a class="glightbox" href="../images/OrganizedToFunctions-1-console-out.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Console output" src="../images/OrganizedToFunctions-1-console-out.png" /></a></p>
<p>The output file can be found in the file manager in the "OrganizedToFunctions-1\bin\Debug\net8.0\" or a similarly named folder as "us-500.processed.txt". Open it and take a look at the data.</p>
<h3 id="evaluation-of-the-solution">Evaluation of the solution<a class="headerlink" href="#evaluation-of-the-solution" title="Permanent link">&para;</a></h3>
<ul>
<li>The solution is fundamentally well-structured and easy to understand.</li>
<li>It follows the <strong><mark>KISS (Keep It Stupid Simple)</mark></strong> principle, avoiding unnecessary complications. This is good because there are no anticipated future development needs, and there is no need to support different formats, logic, etc.</li>
<li>
<p>However, the solution does not follow one of the most fundamental and well-known design principles, namely the <strong><mark>Single Responsibility Principle (SRP)</mark></strong>. This principle expects that each class should have only one responsibility (it should focus on just one thing).</p>
<ul>
<li>It’s clear that the <code>Anonymizer</code> class has multiple responsibilities: processing input, data cleaning, anonymization, producing output, etc.</li>
<li>This problem is not immediately noticeable and doesn’t cause any issues for us because each responsibility is simple and "fits" into a short function. But if any of these responsibilities became more complex, or were implemented in multiple functions, they should definitely be organized into separate classes.</li>
</ul>
<details class="note">
<summary>Why is it problematic if a class has multiple responsibilities? *</summary>
<ul>
<li>It becomes harder to understand its operation because it doesn’t focus on a single task.</li>
<li>If any responsibility needs to change, the large class handling multiple tasks must be modified and retested.</li>
</ul>
</details>
</li>
<li>
<p>Automated integration (input-output) tests can be written for the solution, but "real" unit tests are not feasible.</p>
</li>
</ul>
<h2 id="solution-3-organizedtofunctions-2-twoalgorithms">Solution 3 (OrganizedToFunctions-2-TwoAlgorithms)<a class="headerlink" href="#solution-3-organizedtofunctions-2-twoalgorithms" title="Permanent link">&para;</a></h2>
<p>In contrast to the previous "plans", new user requirements have emerged. Our client changed his mind and now requests a different anonymization algorithm for a new data set: the ages of the individuals need to be stored in ranges, so the exact ages of the people should not be revealed. For simplicity, we will not anonymize the names in this case, considering it a "pseudo" anonymization (it can still make sense, but it’s not entirely accurate to call it anonymization).</p>
<p>Our solution, which supports both the old and the new algorithm (but only one at a time), can be found in the Visual Studio project <em>OrganizedToFunctions-2-TwoAlgorithms</em>. Let's take a look at the <code>Anonymizer</code> class, focusing on the design principles:</p>
<ul>
<li>We introduced an <code>AnonymizerMode</code> enum type to determine which mode (algorithm) we will use for the <code>Anonymizer</code> class.</li>
<li>The <code>Anonymizer</code> class now has two anonymization operations: <code>Anonymize_MaskName</code> and <code>Anonymize_AgeRange</code>.</li>
<li>The <code>Anonymizer</code> class stores the selected algorithm mode in the <code>_anonymizerMode</code> field. Two constructors have been created to set the <code>_anonymizerMode</code> based on the chosen mode.</li>
<li>The <code>Anonymizer</code> class checks the value of <code>_anonymizerMode</code> in several places (e.g., <code>Run</code>, <code>GetAnonymizerDescription</code> methods) and branches accordingly.</li>
<li>
<p>In the <code>GetAnonymizerDescription</code> method, this check is essential because it is responsible for generating a one-line description of the anonymization algorithm. This description appears in the "summary" at the end of the process. For instance, if we are using the age anonymizer with a 20-year range, this summary will look like:</p>
<p><code>Summary - Anonymizer (Age anonymizer with range size 20): Persons: 500, trimmed: 2</code></p>
</li>
</ul>
<h3 id="evaluation-of-the-solution_1">Evaluation of the solution<a class="headerlink" href="#evaluation-of-the-solution_1" title="Permanent link">&para;</a></h3>
<p>Overall, our solution has <strong>worse code quality</strong> compared to the previous one. Initially, it wasn’t an issue that the anonymization algorithms were not extendable because there was no demand for it. However, once the need to introduce a new algorithm arose, it became a problem that we didn’t make the solution extensible: now, we can expect that more algorithms will be introduced in the future.</p>
<p>Why do we say that our code is not extendable when "only" a new enum value and an extra <code>if</code>/<code>switch</code> branch should be introduced at some point in the code when a new algorithm should be introduced?</p>
<p><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> <strong>Open/Closed Principle</strong><br />
The key point is that we consider a class extendable if new behavior (in our case, new algorithms) can be introduced <strong>without modifying</strong> the class itself, simply by <strong>extending</strong> or <strong>adding</strong> to the code. In other words, in this case, we should not need to modify the <code>Anonymizer</code> class, which is clearly not the case. This principle is known as the <strong>Open/Closed Principle</strong>: the class should be <em>Open for Extension, Closed for Modification</em>. The problem with modifying the code is that we likely introduce new bugs and need to retest the modified code, which can result in significant time/cost investment.</p>
<p>What is the exact goal, and how can we achieve it? There are certain parts of our class that we don’t want to hard-code:</p>
<ul>
<li>These are not data, but <strong><mark>behaviors (code, logic)</mark></strong>.</li>
<li>We don't solve these using <code>if</code>/<code>switch</code> statements: we introduce "extension points" and somehow allow "any" code to run in those places.</li>
<li>The variable, case-dependent parts of the code should be moved <strong>to other classes</strong> (in a replaceable manner from the perspective of the class)!</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No magic here, we’ll use the tools we already know: inheritance with abstract/virtual methods, interfaces, or delegates.</p>
</div>
<p>Let’s identify the parts of our class that involve case-dependent, variable logic, and shouldn’t be hard-coded into the <code>Anonymizer</code> class:</p>
<ul>
<li>One is the anonymization logic: <code>Anonymize_MaskName</code>/<code>Anonymize_AgeRange</code></li>
<li>The other is the <code>GetAnonymizerDescription</code></li>
</ul>
<p>These need to be decoupled from the class, and we need to make these points extendable. The following diagram illustrates the general goal:</p>
<details class="note">
<summary>Illustration of the general solution approach</summary>
<p><a class="glightbox" href="../images/illustrate-extensibility.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Extensibility illustration" src="../images/illustrate-extensibility.png" /></a></p>
</details>
<p>We’ll look at three specific design patterns/techniques for achieving the above:</p>
<ul>
<li>Template Method pattern</li>
<li>Strategy pattern (with Dependency Injection)</li>
<li>Delegate (optionally with Lambda expressions)</li>
</ul>
<p>We have actually used these patterns during our studies before, but now we’ll explore them more deeply and practice applying them in a broader context. We will apply the first two in the lab, and the third will be practiced in a related homework assignment.</p>
<h2 id="solution-4-3-templatemethodtemplatemethod-1">Solution 4 (3-TemplateMethod/TemplateMethod-1)<a class="headerlink" href="#solution-4-3-templatemethodtemplatemethod-1" title="Permanent link">&para;</a></h2>
<p>In this step, we will apply the <strong>Template Method</strong> design pattern to make our solution extendable at the necessary points.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the pattern is "misleading": it has nothing to do with the template methods we learned in C++!</p>
</div>
<details class="info">
<summary>Template Method-based solution class diagram</summary>
<p>The following UML class diagram illustrates the Template Method-based solution, focusing on the core concepts:</p>
<p><a class="glightbox" href="../images/template-method-goal.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Template Method UML class diagram goal" src="../images/template-method-goal.png" /></a></p>
</details>
<p>In the pattern, the following principles help separate the "unchanging" and "changing" parts of the code (it's worth understanding these concepts, based on the above class diagram and applying them to our example):</p>
<ul>
<li>The "common/unchanging" parts are placed in a base class.</li>
<li>We introduce extension points in this base class using abstract/virtual methods, which will be called in the extension points.</li>
<li>The case-dependent implementation of these methods goes into the derived classes.</li>
</ul>
<p>The "trick" is that when the base class calls these abstract/virtual methods, the case-dependent code in the derived classes gets executed.</p>
<p>Next, we will refactor the previous <code>enum</code> and <code>if</code>/<code>switch</code> based solution to follow the <strong>Template Method</strong> pattern (and there will be no <code>enum</code> anymore). We will introduce a base class and two algorithm-dependent derived classes.</p>
<p>Let's proceed with the following steps to refactor the code accordingly. The Visual Studio solution in the "3-TemplateMethod" folder, within the "TemplateMethod-0-Begin" project, contains the previous solution's code (a "copy" of it), which is where we will work:</p>
<ol>
<li>Rename the <code>Anonymizer</code> class to <code>AnonymizerBase</code> (e.g., right-click the class name in the source file and press <span class="keys"><kbd class="key-f2">F2</kbd></span> to rename).</li>
<li>Add two new classes to the project: <code>NameMaskingAnonymizer</code> and <code>AgeAnonymizer</code> (right-click on the project, select <em>Add</em> &gt; <em>Class</em>).</li>
<li>Derive <code>NameMaskingAnonymizer</code> and <code>AgeAnonymizer</code> from <code>AnonymizerBase</code>.</li>
<li>
<p>Move the following parts from <code>AnonymizerBase</code> to <code>NameMaskingAnonymizer</code>:</p>
<ol>
<li>The <code>_mask</code> field.</li>
<li>The constructor with parameters <code>string inputFileName, string mask</code>, renaming it to <code>NameMaskingAnonymizer</code>, and:<ol>
<li>Removing the line <code>_anonymizerMode = AnonymizerMode.Name;</code>.</li>
<li>
<p>Replacing the <code>this</code> constructor call with a <code>base</code> constructor call.</p>
<details class="example">
<summary>Constructor code</summary>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">NameMaskingAnonymizer</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">mask</span><span class="p">):</span><span class="w"> </span><span class="k">base</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mask</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Move the relevant parts from <code>AnonymizerBase</code> to <code>AgeAnonymizer</code>:</p>
<ol>
<li>The <code>_rangeSize</code> member variable.</li>
<li>The constructor with parameters <code>string inputFileName, int rangeSize</code>, renamed to <code>AgeAnonymizer</code>:<ol>
<li>Remove the line <code>_anonymizerMode = AnonymizerMode.Age;</code>.</li>
<li>
<p>Replace the <code>this</code> constructor call with a <code>base</code> constructor call.</p>
<details class="example">
<summary>Constructor code</summary>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">AgeAnonymizer</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">):</span><span class="w"> </span><span class="k">base</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_rangeSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>In the <code>AnonymizerBase</code> class:</p>
<ol>
<li>Delete the <code>AnonymizerMode</code> enum type.</li>
<li>Delete the <code>_anonymizerMode</code> member.</li>
</ol>
</li>
</ol>
<p>Identify the parts of the logic that are case-dependent and should not be hard-coded into the reusable <code>AnonymizerBase</code> class:</p>
<ul>
<li>One is <code>Anonymize_MaskName</code> / <code>Anonymize_AgeRange</code>,</li>
<li>The other is <code>GetAnonymizerDescription</code>.</li>
</ul>
<p>Following the Template Method pattern, introduce abstract (or optionally virtual) methods in the base class for these, and call them from within the base class. The case-specific implementations should be placed in the derived classes using <code>override</code>.</p>
<ol>
<li>Mark the <code>AnonymizerBase</code> class as abstract (add the <code>abstract</code> keyword before <code>class</code>).</li>
<li>
<p>In <code>AnonymizerBase</code>, introduce the following abstract method:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">abstract</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">);</span>
</code></pre></div>
<p>This method will be responsible for performing the anonymization.</p>
</li>
<li>
<p>Move the <code>Anonymize_MaskName</code> method to the <code>NameMaskingAnonymizer</code> class and modify its signature so that it overrides the abstract <code>Anonymize</code> method defined in the base class:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">Person</span><span class="p">(</span><span class="n">_mask</span><span class="p">,</span><span class="w"> </span><span class="n">_mask</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">CompanyName</span><span class="p">,</span>
<span class="w">       </span><span class="n">person</span><span class="p">.</span><span class="n">Address</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">City</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Age</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Weight</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Decease</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The body of the function only needs to be modified so that it uses the <code>_mask</code> member variable instead of the removed <code>mask</code> parameter.</p>
</li>
<li>
<p>In a completely analogous way to the previous step, move the <code>Anonymize_AgeRange</code> method to the <code>AgeAnonymizer</code> class, and modify its signature so that it overrides the <code>Anonymize</code> abstract function in the base class:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>The body of the function only needs to be modified so that it uses the <code>_rangeSize</code> member variable instead of the removed <code>rangeSize</code> parameter.</p>
</li>
<li>
<p>In the <code>Run</code> function of the <code>AnonymizerBase</code> class, we can now replace the <code>Anonymize</code> calls in the <code>if</code>/<code>else</code> expression with a simple call to the abstract function.</p>
<p>Replace:</p>
<del class="critic block">
<div class="highlight"><pre><span></span><code><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_anonymizerMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AnonymizerMode</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span>
<span class="w">    </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Anonymize_MaskName</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">_mask</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">_anonymizerMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AnonymizerMode</span><span class="p">.</span><span class="n">Age</span><span class="p">)</span>
<span class="w">    </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Anonymize_AgeRange</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">_rangeSize</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotSupportedException</span><span class="p">(</span><span class="s">&quot;The requested anonymization mode is not supported.&quot;</span><span class="p">);</span>
</code></pre></div>
</del>
<p>with:</p>
<div class="highlight"><pre><span></span><code><span class="kt">var</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Anonymize</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</code></pre></div>
</li>
</ol>
<p>We have completed one of our extension points. However, there is still one remaining, the <code>GetAnonymizerDescription</code>, which is also case-dependent. Its transformation is very similar to the previous series of steps:</p>
<ol>
<li>
<p>Copy the <code>GetAnonymizerDescription</code> method from the <code>AnonymizerBase</code> class to the <code>NameMaskingAnonymizer</code>, including the <code>override</code> keyword in the signature, keeping only the logic relevant to <code>NameMaskingAnonymizer</code> in the method body:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;NameMasking anonymizer with mask {_mask}&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Copy the <code>GetAnonymizerDescription</code> method from <code>AnonymizerBase</code> to the <code>AgeAnonymizer</code>, including the <code>override</code> keyword in the signature, keeping only the logic relevant to <code>AgeAnonymizer</code> in the method body:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;Age anonymizer with range size {_rangeSize}&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>The question is what to do with the <code>GetAnonymizerDescription</code> method in <code>AnonymizerBase</code>. We will make it a virtual method, not abstract, since we can provide a meaningful default behavior here: simply return the class name (which would be "NameMaskingAnonymizer" for the <code>NameMaskingAnonymizer</code> class, for example). With this, we also get rid of the rigid <code>switch</code> structure:</p>
<div class="highlight"><pre><span></span><code><span class="k">protected</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">GetType</span><span class="p">().</span><span class="n">Name</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Reflection</p>
<p>The <code>GetType()</code> method, inherited from the <code>object</code> base class, returns a <code>Type</code> object for our class. This is part of <strong>reflection</strong>, a topic we will study in more detail in the lecture at the end of the semester.</p>
</div>
</li>
</ol>
<p>There is only one thing left: in the <code>Program.cs</code> <code>Main</code> method, we now try to instantiate the <code>AnonymizerBase</code> base class (due to the previous renaming). Instead, we should instantiate one of the two derived classes. For example:</p>
<div class="highlight"><pre><span></span><code><span class="n">NameMaskingAnonymizer</span><span class="w"> </span><span class="n">anonymizer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;us-500.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;***&quot;</span><span class="p">);</span>
<span class="n">anonymizer</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>
</code></pre></div>
<p>We are done. Let's test it to better "feel" if the extension points truly work (but if we are short on time during the lab, this is not particularly important, as we've done similar things in previous semesters in C++/Java context):</p>
<ul>
<li>In Visual Studio, set the <em>TemplateMethod-0-Begin</em> project as the startup project if we haven't already.</li>
<li>Set a breakpoint on the <code>var person = Anonymize(persons[i]);</code> line in the <code>AnonymizerBase</code> class.</li>
<li>When the debugger stops at this point during runtime, press <code>F11</code> to step into it.</li>
<li>You will observe that the <code>AgeAnonymizer</code> subclass method is called.</li>
</ul>
<p>Let's take a look at the solution's class diagram:</p>
<details>
<summary>Template Method based solution class diagram *</summary>
<p><a class="glightbox" href="../images/template-method.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Template Method based solution class diagram" src="../images/template-method.png" /></a></p>
</details>
<div class="admonition note">
<p class="admonition-title">The solution of our work can be found in the <code>3-TemplateMethod/TemplateMethod-1</code> project, in case you need it.</p>
</div>
<details>
<summary>Why is the pattern called Template Method? *</summary>
<p>The pattern is named Template Method because, using our application as an example, the <code>Run</code> and <code>PrintSummary</code> are "template methods" that define a skeleton logic, a framework, in which certain steps are left undefined. We leave the "code" for these steps to abstract/virtual functions, and the derived classes define their implementation.</p>
</details>
<h3 id="evaluation-of-the-solution_2">Evaluation of the solution<a class="headerlink" href="#evaluation-of-the-solution_2" title="Permanent link">&para;</a></h3>
<p>Let's check if the solution meets our goals:</p>
<ul>
<li>The <code>AnonymizerBase</code> class has become more reusable.</li>
<li>If we need a new anonymization logic in the future, we simply derive from it. This is an extension, not a modification.</li>
<li>Accordingly, the OPEN/CLOSED principle is fulfilled, meaning we can customize and extend the logic at the two points defined in the base class without modifying its code.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Should every method in our class be extensible?</p>
<p>Note that we didn't make every method in <code>AnonymizerBase</code> virtual (thus not making the class extensible at every point). We only made them virtual where we believe future logic extension might be necessary.</p>
</div>
<h2 id="solution-5-3-templatemethodtemplatemethod-2-progress">Solution 5 (3-TemplateMethod/TemplateMethod-2-Progress)<a class="headerlink" href="#solution-5-3-templatemethodtemplatemethod-2-progress" title="Permanent link">&para;</a></h2>
<p>Let's say a new, relatively simple requirement arises:</p>
<ul>
<li>
<p>For the <code>NameMaskingAnonymizer</code>, we keep the previous simple progress display (after every row, we print out which row we are currently processing),</p>
<details class="note">
<summary>Simple progress illustration</summary>
<p><a class="glightbox" href="../images/progress-simple.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Simple progress illustration" src="../images/progress-simple.png" /></a></p>
</details>
</li>
<li>
<p>However, for the <code>AgeAnonymizer</code>, the progress display needs to be different: we need to show, updated after every row, the percentage of processing completed.</p>
<details class="note">
<summary>Percentage progress illustration</summary>
<p><a class="glightbox" href="../images/progress-percent.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Percentage progress illustration" src="../images/progress-percent.gif" /></a></p>
<p>(Since we currently have few data (only 500 rows), we won’t see this as expected at the end of our solution, it will jump to 100% in no time)</p>
</details>
</li>
</ul>
<p>The solution is very simple: by applying the Template Method pattern more broadly in the <code>Run</code> method, we introduce an extension point for the progress display, and delegate the implementation to a virtual function.</p>
<p>Let's jump straight to the completed solution (<em>3-TemplateMethod/TemplateMethod-2-Progress</em> project):</p>
<ul>
<li>In the <code>AnonymizerBase</code> class, a new <code>PrintProgress</code> virtual function (by default, it doesn't print anything)</li>
<li>In <code>Run</code>, a call to this function</li>
<li>Implementations (override) in <code>NameMaskingAnonymizer</code> and <code>AgeAnonymizer</code> as needed</li>
</ul>
<p>Currently, there is no significant learning to be gained from this, but in the next step, there will be.</p>
<h2 id="solution-6-3-templatemethodtemplatemethod-3-progressmultiple">Solution 6 (3-TemplateMethod/TemplateMethod-3-ProgressMultiple)<a class="headerlink" href="#solution-6-3-templatemethodtemplatemethod-3-progressmultiple" title="Permanent link">&para;</a></h2>
<p>A new - and entirely logical - requirement has emerged: in the future, any anonymization algorithm should be usable with any progress display. Currently, this means four cross-combinations:</p>
<table>
<thead>
<tr>
<th>Anonymizer</th>
<th>Progress</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name anonymizer</td>
<td>Simple progress</td>
</tr>
<tr>
<td>Name anonymizer</td>
<td>Percentage progress</td>
</tr>
<tr>
<td>Age anonymizer</td>
<td>Simple progress</td>
</tr>
<tr>
<td>Age anonymizer</td>
<td>Percentage progress</td>
</tr>
</tbody>
</table>
<p>Let's jump to the completed solution (<em>3-TemplateMethod/TemplateMethod-3-ProgressMultiple</em> project). Instead of code, open the <code>Main.cd</code> class diagram in the project, and let's review the solution based on that (or we can view the diagram below in the guide).</p>
<details>
<summary>Template Method-based solution (two aspects) class diagram</summary>
<p><a class="glightbox" href="../images/template-method-progress-multiple.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Template Method-based solution (two aspects) class diagram" src="../images/template-method-progress-multiple.png" /></a></p>
</details>
<p>It’s noticeable that something is "wrong" here, as we had to create a separate subclass for each cross-combination. To reduce code duplication, additional intermediate classes are also present in the hierarchy. Moreover:</p>
<ul>
<li>If a new anonymization algorithm is introduced in the future, we will need to write at least as many new classes as there are progress types supported.</li>
<li>If a new progress type is introduced in the future, we will need to write at least as many new classes as there are anonymizer types supported.</li>
</ul>
<p>What caused the problem? The fact that <strong>the behavior of our class needs to be extendable along multiple dimensions/aspects (in our case, anonymization and progress), and these need to be supported in many cross-combinations</strong>. If we had to add more aspects (e.g., reading methods, output generation), the problem would grow exponentially. In such cases, the Template Method design pattern is not applicable.</p>
<h2 id="solution-7-4-strategystrategy-1">Solution 7 (4-Strategy/Strategy-1)<a class="headerlink" href="#solution-7-4-strategystrategy-1" title="Permanent link">&para;</a></h2>
<p>In this step, we will use the <strong>Strategy</strong> design pattern to make our initial solution extendable at the necessary points. The pattern separates the "unchanging/reusable" and "changing" parts based on the following principles:</p>
<ul>
<li>The "common/unchanging" parts are placed in a specific class (but this will not be a "base class").</li>
<li>Unlike Template Method, we will use composition (containment) rather than inheritance: we delegate the implementation of behavior in the extension points to other objects contained as interfaces (rather than abstract/virtual functions).</li>
<li>We do this for every aspect/dimension of the class behavior that we want to make replaceable/extensible, independently. As we will see, this avoids the combinatorial explosion we experienced in the previous chapter.</li>
</ul>
<p>This is much simpler in practice than it may seem when described (we have already used it several times in our previous studies). Let's understand it in the context of our example.</p>
<p>Below, let's take a look at the class diagram illustrating the Strategy-based solution (building on the explanation that follows the diagram).</p>
<details class="info">
<summary>Strategy-based solution class diagram</summary>
<p>The following UML class diagram illustrates the Strategy-based solution, focusing on the key aspects:
<a class="glightbox" href="../images/strategy-goal.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Strategy UML class diagram goal" src="../images/strategy-goal.png" /></a></p>
</details>
<p>The first step in applying the Strategy pattern is to determine <strong>how many different aspects of the class behavior</strong> we want to make extendable. In our example, at least for now, there are two:</p>
<ul>
<li>Behavior related to anonymization, which consists of two operations:<ul>
<li>Anonymization logic</li>
<li>Defining the description of the anonymization logic (producing the description string)</li>
</ul>
</li>
<li>Progress handling, which consists of one operation:<ul>
<li>Displaying progress</li>
</ul>
</li>
</ul>
<p>The hard part is done, from here on we can basically work mechanically following the Strategy pattern:</p>
<ol>
<li>For each of the above aspects, we need to introduce a strategy interface with the operations defined above, and create the corresponding implementations.</li>
<li>In the <code>Anonymizer</code> class, we need to introduce a strategy interface member variable, and in the extension points, use the currently set strategy implementation objects through these member variables.</li>
</ol>
<p>These elements are already present in the class diagram above. Now, let's move on to the code. Our starting environment is in the "Strategy-0-Begin" project in the "4-Strategy" folder, let's work in it. This is the same solution that uses enums, which we used as a starting point for the Template Method pattern as well.</p>
<h3 id="anonymization-strategy">Anonymization strategy<a class="headerlink" href="#anonymization-strategy" title="Permanent link">&para;</a></h3>
<p>We start with handling the <strong>anonymization strategy/aspect</strong>. Let's introduce the corresponding interface:</p>
<ol>
<li>Create a folder named <code>AnonymizerAlgorithms</code> in the project (right-click on the "Strategy-0-Begin" project, then select <em>Add/New Folder</em> from the menu). In the following steps, let's place each interface and class into a separate source file, according to its name.</li>
<li>
<p>Add in this folder an <code>IAnonymizerAlgorithm</code> interface with the following code:</p>
<div class="highlight"><span class="filename">IAnonymizerAlgorithm.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">IAnonymizerAlgorithm</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">);</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>We can also observe that for the <code>GetAnonymizerDescription</code> method, in modern C#, we can provide default implementations for interface methods if we wish.</p>
</li>
</ol>
<p>Now let's implement the <strong>name</strong> anonymization strategy (i.e., a strategy implementation for name anonymization).</p>
<ol>
<li>Create a class <code>NameMaskingAnonymizerAlgorithm</code> in the same folder.</li>
<li>Move the <code>_mask</code> field from the <code>Anonymizer</code> class to the <code>NameMaskingAnonymizerAlgorithm</code>.</li>
<li>
<p>Add the following constructor to <code>NameMaskingAnonymizerAlgorithm</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">NameMaskingAnonymizerAlgorithm</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mask</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Implement the <code>IAnonymizerAlgorithm</code> interface. After adding <code>: IAnonymizerAlgorithm</code> to the class name, it is advisable to use Visual Studio's code generation feature for the method skeletons: place the cursor on the interface name (click on it in the source code), press 'ctrl' + '.' and from the menu, choose "Implement interface". Note: since there is a default implementation for <code>GetAnonymizerDescription</code> in the interface, only the <code>Anonymize</code> method will be generated, which is fine for now.</p>
</li>
<li>Move the body of the <code>Anonymize_MaskName</code> method from the <code>Anonymizer</code> class to the <code>Anonymize</code> method in <code>NameMaskingAnonymizerAlgorithm</code>. The only change in the method body is to use the <code>_mask</code> field instead of the now non-existent <code>mask</code> parameter. Also, delete the <code>Anonymize_MaskName</code> method in the <code>Anonymizer</code> class.</li>
<li>
<p>Finally, let's implement the <code>GetAnonymizerDescription</code> method of the strategy interface. Copy the <code>GetAnonymizerDescription</code> method from the <code>Anonymizer</code> class to the <code>NameMaskingAnonymizerAlgorithm</code>, and keep only the logic relevant to the name anonymizer, making the method public:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;NameMasking anonymizer with mask {_mask}&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<details class="example">
<summary>Our strategy implementation for name anonymization is completed, its full code is the following:</summary>
<div class="highlight"><span class="filename">NameMaskingAnonymizerAlgorithm.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NameMaskingAnonymizerAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="n">IAnonymizerAlgorithm</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">_mask</span><span class="p">;</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">NameMaskingAnonymizerAlgorithm</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">mask</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mask</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">Person</span><span class="p">(</span><span class="n">_mask</span><span class="p">,</span><span class="w"> </span><span class="n">_mask</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">CompanyName</span><span class="p">,</span>
<span class="w">            </span><span class="n">person</span><span class="p">.</span><span class="n">Address</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">City</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Age</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Weight</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Decease</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;NameMasking anonymizer with mask {_mask}&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
</ol>
<p>In the next step, we will create the implementation of our <code>IAnonymizerAlgorithm</code> strategy interface related to <strong>age</strong> anonymization.</p>
<ol>
<li>Add an <code>AgeAnonymizerAlgorithm</code> class in the same folder (AnonymizerAlgorithms).</li>
<li>Move the relevant <code>_rangeSize</code> field from the <code>Anonymizer</code> class into <code>AgeAnonymizerAlgorithm</code>.</li>
<li>
<p>Add the following constructor to <code>AgeAnonymizerAlgorithm</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">AgeAnonymizerAlgorithm</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_rangeSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Implement the <code>IAnonymizerAlgorithm</code> interface. After adding <code>: IAnonymizerAlgorithm</code> after the class name, it's again recommended to generate the method skeletons for <code>Anonymize</code> using Visual Studio, similar to the previous case.</p>
</li>
<li>
<p>Move the body of the <code>Anonymize_AgeRange</code> method from the <code>Anonymizer</code> class into the <code>Anonymize</code> method of <code>AgeAnonymizerAlgorithm</code>. In the method body, simply replace the now-nonexistent <code>rangeSize</code> parameter with the <code>_rangeSize</code> field. Afterwards, delete the <code>Anonymize_AgeRange</code> method from the <code>Anonymizer</code> class.</p>
</li>
<li>
<p>Now implement the <code>GetAnonymizerDescription</code> method from the strategy interface. Copy the implementation of <code>GetAnonymizerDescription</code> from the <code>Anonymizer</code> class into <code>AgeAnonymizerAlgorithm</code>, but only keep the logic related to age anonymization, and make the method public:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;Age anonymizer with range size {_rangeSize}&quot;</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
</li>
<li>
<details class="example">
<summary>Our strategy implementation for age anonymization is completed, its full code is the following:</summary>
<div class="highlight"><span class="filename">AgeAnonymizerAlgorithm.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AgeAnonymizerAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="n">IAnonymizerAlgorithm</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_rangeSize</span><span class="p">;</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">AgeAnonymizerAlgorithm</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_rangeSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="nf">Anonymize</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This is whole number integer arithmetic, e.g. for 55 / 20 we get 2</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">rangeIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">Age</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">_rangeSize</span><span class="p">;</span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">newAge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">$&quot;{rangeIndex * _rangeSize}..   {(rangeIndex + 1) * _rangeSize}&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">Person</span><span class="p">(</span><span class="n">person</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">LastName</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">CompanyName</span><span class="p">,</span>
<span class="w">            </span><span class="n">person</span><span class="p">.</span><span class="n">Address</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">City</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">State</span><span class="p">,</span><span class="w"> </span><span class="n">newAge</span><span class="p">,</span>
<span class="w">            </span><span class="n">person</span><span class="p">.</span><span class="n">Weight</span><span class="p">,</span><span class="w"> </span><span class="n">person</span><span class="p">.</span><span class="n">Decease</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">GetAnonymizerDescription</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;Age anonymizer with range size {_rangeSize}&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
</ol>
<p><img alt="❗" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2757.svg" title=":exclamation:" /> Make sure to note that the interface and its implementations deal exclusively with <strong>anonymization logic</strong> —  no other logic (e.g., progress handling) is included here!</p>
<h3 id="progress-strategy">Progress strategy<a class="headerlink" href="#progress-strategy" title="Permanent link">&para;</a></h3>
<p>In the next step, let’s introduce the interface and implementations related to <strong>progress handling</strong>:</p>
<ol>
<li>
<p>Create a folder named <code>Progresses</code> in the project. In the next steps, place each interface and class into a separate source file, named accordingly, as usual.</p>
</li>
<li>
<p>Add an <code>IProgress</code> interface in this folder with the following code:</p>
<details class="example">
<summary>Solution</summary>
<div class="highlight"><span class="filename">IProgress.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">IProgress</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Report</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
<li>
<p>Add the simple progress implementaion of this interface in the same folder. The implementation is "derived" from the <code>PrintProgress</code> method in the <code>Anonymizer</code> class:</p>
<details class="example">
<summary>Solution</summary>
<div class="highlight"><span class="filename">SimpleProgress.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">SimpleProgress</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IProgress</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Report</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{index + 1}. person processed&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
<li>
<p>Add the percentage-based progress implementation of this interface in the same folder. We won’t go into the details of the code logic. There's no direct equivalent for this in the <code>Anonymizer</code> class, as it was only introduced in our template method–based solution (we didn’t inspect that code, but this is essentially its core idea):</p>
<details class="example">
<summary>Solution</summary>
<div class="highlight"><span class="filename">PercentProgress.cs</span><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PercentProgress</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IProgress</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Report</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">percentage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)((</span><span class="kt">double</span><span class="p">)(</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="p">);</span>

<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">$&quot;\rProcessing: {percentage} %&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
</li>
</ol>
<p><img alt="❗" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2757.svg" title=":exclamation:" /> Make sure to note that the interface and its implementations deal exclusively with <strong>progress handling</strong> — no other logic (e.g., anonymization) is included here!</p>
<h3 id="applying-the-strategies">Applying the strategies<a class="headerlink" href="#applying-the-strategies" title="Permanent link">&para;</a></h3>
<p>The next important step is to make the anonymizer base class reusable and extensible using the strategies we’ve just introduced. In the <code>Anonymizer.cs</code> file:</p>
<ol>
<li>Remove the following:</li>
<li>The <code>AnonymizerMode</code> enum type.</li>
<li>
<p>The <code>_anonymizerMode</code> field (as well as <code>_mask</code> and <code>_rangeSize</code>, if they still remain).</p>
</li>
<li>
<p>Introduce strategy interface-type fields:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">IProgress</span><span class="w"> </span><span class="n">_progress</span><span class="p">;</span>
<span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">IAnonymizerAlgorithm</span><span class="w"> </span><span class="n">_anonymizerAlgorithm</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>Add the appropriate using directives to the top of the file:</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="nn">Lab_Extensibility.AnonymizerAlgorithms</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">Lab_Extensibility.Progresses</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>The initial values of <code>_progress</code> and <code>_anonymizerAlgorithm</code>  introduced in the previous section are null, set these references in the constructor to the implementation that suits our needs. For example:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">Anonymizer</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">mask</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">)</span>
<span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="n">_progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PercentProgress</span><span class="p">();</span>
</span><span class="hll"><span class="w">    </span><span class="n">_anonymizerAlgorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">NameMaskingAnonymizerAlgorithm</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
</span><span class="p">}</span>

<span class="k">public</span><span class="w"> </span><span class="nf">Anonymizer</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">rangeSize</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">this</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">)</span>
<span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="n">_progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PercentProgress</span><span class="p">();</span>
</span><span class="hll"><span class="w">    </span><span class="n">_anonymizerAlgorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AgeAnonymizerAlgorithm</span><span class="p">(</span><span class="n">rangeSize</span><span class="p">);</span>
</span><span class="p">}</span>
</code></pre></div>
</li>
</ol>
<p>In the <code>Anonymizer</code> class, delegate the currently hardcoded but <strong>anonymization-dependent</strong> logic to the strategy implementation referenced by <code>_anonymizerAlgorithm</code>.</p>
<ol>
<li>
<p>Delegate the <code>Anonymize</code> calls in the <code>if</code>/<code>else</code> expressions in the <code>Run</code> function of the <code>Anonymizer</code> class, to the <code>_anonymizerAlgorithm</code> object.</p>
<p>Replace:</p>
<del class="critic block">
<p><div class="highlight"><pre><span></span><code><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_anonymizerMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AnonymizerMode</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span>
<span class="w">    </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Anonymize_MaskName</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">_mask</span><span class="p">);</span>
<span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">_anonymizerMode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AnonymizerMode</span><span class="p">.</span><span class="n">Age</span><span class="p">)</span>
<span class="w">    </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Anonymize_AgeRange</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">_rangeSize</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NotSupportedException</span><span class="p">(</span><span class="s">&quot;The requested anonymization mode is not supported.&quot;</span><span class="p">);</span>
</code></pre></div>
</del></p>
<p>with:</p>
<div class="highlight"><pre><span></span><code><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_anonymizerAlgorithm</span><span class="p">.</span><span class="n">Anonymize</span><span class="p">(</span><span class="n">persons</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</code></pre></div>
</li>
<li>
<p>If we haven't done so already, delete the <code>Anonymize_MaskName</code> and <code>Anonymize_AgeRange</code> functions, since their code has already been moved into the corresponding strategy implementations, detached from the class.</p>
</li>
<li>
<p>Our <code>PrintSummary</code> function currently calls the rigid, <code>switch</code>-based <code>GetAnonymizerDescription</code>. Replace this <code>GetAnonymizerDescription</code> call by delegating it to the <code>_anonymizerAlgorithm</code> object. In the <code>PrintSummary</code> function (highlighting only the relevant part):</p>
<p>Instead of:</p>
<del class="critic block">
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">...</span><span class="w"> </span><span class="n">GetAnonymizerDescription</span><span class="p">()</span><span class="w"> </span><span class="p">...</span>
</code></pre></div>
</del>
<p>Use:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">...</span><span class="w"> </span><span class="n">_anonymizerAlgorithm</span><span class="p">.</span><span class="n">GetAnonymizerDescription</span><span class="p">()</span><span class="w"> </span><span class="p">...</span>
</code></pre></div>
<p>A few lines below, also delete the <code>GetAnonymizerDescription</code> function from the class (its code has already been moved into the appropriate strategy implementations).</p>
</li>
</ol>
<p>The last step is to replace the <strong>progress handling</strong> hard-coded in the <code>Anonymizer</code> class:</p>
<ol>
<li>
<p>Here, delegate the request to the previously introduced <code>_progress</code> object. In the <code>Run</code> function, replace one line as follows:</p>
<p>Instead of:</p>
<del class="critic block">
<div class="highlight"><pre><span></span><code><span class="n">PrintProgress</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
</code></pre></div>
</del>
<p>Use:</p>
<div class="highlight"><pre><span></span><code><span class="n">_progress</span><span class="p">.</span><span class="n">Report</span><span class="p">(</span><span class="n">persons</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</code></pre></div>
</li>
<li>
<p>Delete the <code>PrintProgress</code> function, as its code has already been moved to a suitable strategy implementation, detached from the class.</p>
</li>
</ol>
<p>We are done. The completed solution can be found in the "4-Strategy/Strategy-1" project (if we are stuck somewhere or the code doesn't compile, we can compare it with this).</p>
<h3 id="evaluation-of-the-solution_3">Evaluation of the solution<a class="headerlink" href="#evaluation-of-the-solution_3" title="Permanent link">&para;</a></h3>
<p>We are finished with the introduction of the strategy pattern. However, in its current form, it is almost never used. Let's check our solution: is it truly reusable, and is it possible to change the anonymizer algorithm or progress handling without modifying the <code>Anonymizer</code> class? To do this, we need to examine whether there is any code in the class that is implementation-dependent.</p>
<p>Unfortunately, we can find such code. The constructor is hard-coded to create specific algorithm and progress implementations. We must check this in the code! If we want to change the algorithm or progress mode, we will have to modify the type after the <code>new</code> operator in these lines, which means modifying the class itself.</p>
<p>Many — quite justifiably — do not consider this a true strategy-based solution in its current form. We will implement the complete solution in the next step.</p>
<h2 id="solution-8-4-strategystrategy-2-di">Solution 8 (4-Strategy/Strategy-2-DI)<a class="headerlink" href="#solution-8-4-strategystrategy-2-di" title="Permanent link">&para;</a></h2>
<p><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:" /> <strong>Dependency Injection (DI)</strong><br />
The solution is applying <strong>Dependency Injection (DI)</strong>. The idea is that not the class itself instantiates its behavioural dependencies (these are the strategy implementations), but we pass them to it from outside, e.g. in constructor parameters, or even in the form of properties or setter operations. Referenced as interface types, of course!</p>
<p>Let's refactor the <code>Anonymizer</code> class accordingly, so that it doesn't instantiate the strategy implementations itself, but instead receives them as constructor parameters:</p>
<ol>
<li>Delete all three constructors.</li>
<li>
<p>Add the following constructor:</p>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="nf">Anonymizer</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">,</span><span class="w"> </span><span class="n">IAnonymizerAlgorithm</span><span class="w"> </span><span class="n">anonymizerAlgorithm</span><span class="p">,</span><span class="w"> </span><span class="n">IProgress</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ArgumentException</span><span class="p">.</span><span class="n">ThrowIfNullOrEmpty</span><span class="p">(</span><span class="n">inputFileName</span><span class="p">);</span>
<span class="w">    </span><span class="n">ArgumentNullException</span><span class="p">.</span><span class="n">ThrowIfNull</span><span class="p">(</span><span class="n">anonymizerAlgorithm</span><span class="p">);</span>

<span class="w">    </span><span class="n">_inputFileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inputFileName</span><span class="p">;</span>
<span class="w">    </span><span class="n">_anonymizerAlgorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">anonymizerAlgorithm</span><span class="p">;</span>
<span class="w">    </span><span class="n">_progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">progress</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>As we can see, providing the <code>progress</code> parameter is optional, as the class user may not be interested in any progress information.</p>
</li>
<li>
<p>Since the <code>_progress</code> strategy can be null, we need to introduce a null check during its usage. Instead of using the <code>.</code> operator, we will use the <code>?.</code> operator:</p>
<div class="highlight"><pre><span></span><code><span class="n">_progress</span><span class="o">?.</span><span class="n">Report</span><span class="p">(</span><span class="n">persons</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
</code></pre></div>
</li>
<li>
<p>Now we are done, the <code>Anonymizer</code> class has become completely independent of the strategy implementations. We can use the <code>Anonymizer</code> class with any combination of anonymizer algorithms and progress handling (without modifying the class itself). Let's create three <code>Anonymizer</code> instances with different combinations in the <code>Main</code> method of the <code>Program.cs</code> file (make sure to delete the existing code in the <code>Main</code> method before):</p>
<div class="highlight"><pre><span></span><code><span class="n">Anonymizer</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;us-500.csv&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">NameMaskingAnonymizerAlgorithm</span><span class="p">(</span><span class="s">&quot;***&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">SimpleProgress</span><span class="p">());</span>
<span class="n">p1</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;--------------------&quot;</span><span class="p">);</span>

<span class="n">Anonymizer</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;us-500.csv&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">NameMaskingAnonymizerAlgorithm</span><span class="p">(</span><span class="s">&quot;***&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">PercentProgress</span><span class="p">());</span>
<span class="n">p2</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;--------------------&quot;</span><span class="p">);</span>

<span class="n">Anonymizer</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="s">&quot;us-500.csv&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">AgeAnonymizerAlgorithm</span><span class="p">(</span><span class="m">20</span><span class="p">),</span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">SimpleProgress</span><span class="p">());</span>
<span class="n">p3</span><span class="p">.</span><span class="n">Run</span><span class="p">();</span>
</code></pre></div>
</li>
<li>
<p>To ensure the code compiles, add the necessary <code>using</code> statements at the top of the file:</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="nn">Lab_Extensibility.AnonymizerAlgorithms</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">Lab_Extensibility.Progresses</span><span class="p">;</span>
</code></pre></div>
</li>
</ol>
<p>We are done, and the complete solution can be found in the "4-Strategy/Strategy-2-DI" project (if you encounter issues or the code doesn't compile, you can compare it with this project).</p>
<div class="admonition note">
<p class="admonition-title">Checking the functionality</p>
<p>During the laboratory, there might not be time for this, but for anyone unsure about "why the strategy pattern works" and how the behavior will differ for the four cases above: it is recommended to set breakpoints in the <code>Program.cs</code> file for the four <code>Run</code> method calls and step through the functions in the debugger to verify that the correct strategy implementation is invoked.</p>
</div>
<p>An object diagram (<code>Main.cd</code>) is included in the project, where the final solution can also be reviewed:</p>
<details class="note">
<summary>Strategy-based solution class diagram</summary>
<p>The following UML class diagram illustrates our strategy-based solution:</p>
<p><a class="glightbox" href="../images/strategy-di.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Strategy DI UML class diagram" src="../images/strategy-di.png" /></a></p>
</details>
<h3 id="evaluation-of-the-solution_4">Evaluation of the solution<a class="headerlink" href="#evaluation-of-the-solution_4" title="Permanent link">&para;</a></h3>
<p>Let's check whether the solution meets our goals:</p>
<ul>
<li>The <code>Anonymizer</code> class has become more reusable.</li>
<li>If a new anonymization logic is needed in the future, only a new <code>IAnonymizerAlgorithm</code> implementation needs to be introduced. This is an extension, not a modification.</li>
<li>If a new progress logic is required in the future, only a new <code>IProgress</code> implementation needs to be introduced. This is an extension, not a modification.</li>
<li>Both of the above points adhere to the OPEN/CLOSED principle, meaning that we can customize and extend the logic of <code>Anonymizer</code> without modifying its code.</li>
<li>There is no risk of the combinatorial explosion seen in the Template Method pattern: any <code>IAnonymizerAlgorithm</code> implementation can be conveniently used with any <code>IProgress</code> implementation, and we do not need to introduce new classes for each combination (this was demonstrated in the <code>Program.cs</code> file).</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Additional Strategy advantages over Template Method *</p>
<ul>
<li>The behavior can be changed at runtime. If there is a need to change the anonymization or progress behavior after an <code>Anonymizer</code> object has been created, it can easily be done (we could simply introduce <code>SetAnonymizerAlgorithm</code> and <code>SetProgress</code> methods that would set the strategy used by the class to the implementation passed in as a parameter).</li>
<li>Supports unit testing (this is not covered in this laboratory).</li>
</ul>
</div>
<hr>
<div class="md-source-file">
  <span class="md-source-file__fact"> <span class="md-icon" title="Utolsó frissítés"> <svg
        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z">
        </path>
      </svg>
    </span>
    <span title="2025. május 5. 20:18:11">
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="2025. május 5. 20:18:11"><span class="timeago" datetime="2025-05-05T20:18:11+02:00" locale="hu"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2025. május 5. 20:18:11">2025-05-05</span>
    </span>
  </span>

  

  <span class="md-source-file__fact">
    <span class="md-icon" title="Szerzők">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z">
        </path>
      </svg>
    </span>
    <span>Szerzők</span>
    <nav><a href="https://github.com/bzolka" target="_blank" rel="noopener noreferrer" class="md-author" title="@bzolka">
        <img src="https://avatars.githubusercontent.com/bzolka?size=72" alt="@bzolka">
      </a><a href="https://github.com/szucscintialia" target="_blank" rel="noopener noreferrer" class="md-author" title="@Cintia Szücs">
        <img src="https://avatars.githubusercontent.com/u/26093637?v=4?size=72" alt="@Cintia Szücs">
      </a></nav>      
  </span>
</div>




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Vissza a tetejére
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; BME VIK AUT
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "search.suggest", "content.action.edit", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "V\u00e1g\u00f3lapra m\u00e1solva", "clipboard.copy": "M\u00e1sol\u00e1s v\u00e1g\u00f3lapra", "search.result.more.one": "1 tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.more.other": "# tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.none": "Nincs tal\u00e1lat", "search.result.one": "1 egyez\u0151 dokumentum", "search.result.other": "# egyez\u0151 dokumentum", "search.result.placeholder": "Keres\u00e9shez \u00edrj ide valamit", "search.result.term.missing": "\u00dcres", "select.version": "Verzi\u00f3v\u00e1lt\u00e1s"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>