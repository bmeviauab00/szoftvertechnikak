
<!doctype html>
<html lang="hu" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Benedek Zoltán">
      
      
        <link rel="canonical" href="https://bmeviauab00.github.io/szoftvertechnikak/2024/labor/7-adatkezeles/index_ger/">
      
      
        <link rel="prev" href="../../6-tervezesi-mintak/index_ger/">
      
      
        <link rel="next" href="../../../hazi/meghirdetes-elott_ger/">
      
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>7. Datenverwaltung - BMEVIAUAB00 Szoftvertechnikák</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../extra-material-theme.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="aut" data-md-color-primary="aut" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#7-datenverwaltung" class="md-skip">
          Kihagyás
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Élőfej">
    <a href="../../.." title="BMEVIAUAB00 Szoftvertechnikák" class="md-header__button md-logo" aria-label="BMEVIAUAB00 Szoftvertechnikák" data-md-component="logo">
      
  <img src="../../../img/logo-bme-aut.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BMEVIAUAB00 Szoftvertechnikák
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              7. Datenverwaltung
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="aut" data-md-color-primary="aut" data-md-color-accent="red"  aria-label="Váltás sötét témára"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Váltás sötét témára" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="indigo"  aria-label="Váltás világos témára"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Váltás világos témára" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Keresés" placeholder="Keresés" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Keresés">
        
        <button type="reset" class="md-search__icon md-icon" title="Törlés" aria-label="Törlés" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Keresés inicializálása
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bmeviauab00/szoftvertechnikak" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauab00/szoftvertechnikak
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Lapok" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Szoftvertechnikák (2024-től)

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../1-model-es-kod-kapcsolata/" class="md-tabs__link">
          
  
  Laborok

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/" class="md-tabs__link">
          
  
  Önálló/házi feladatok

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../1-model-es-kod-kapcsolata/index_eng/" class="md-tabs__link">
          
  
  English course labs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/index_eng/" class="md-tabs__link">
          
  
  Homework

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../1-model-es-kod-kapcsolata/index_ger/" class="md-tabs__link">
          
  
  Deutschkurs-Labore

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../hazi/meghirdetes-elott_ger/" class="md-tabs__link">
          
  
  Hausaufgaben

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigáció" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="BMEVIAUAB00 Szoftvertechnikák" class="md-nav__button md-logo" aria-label="BMEVIAUAB00 Szoftvertechnikák" data-md-component="logo">
      
  <img src="../../../img/logo-bme-aut.png" alt="logo">

    </a>
    BMEVIAUAB00 Szoftvertechnikák
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bmeviauab00/szoftvertechnikak" title="Főoldalra ugrás" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    bmeviauab00/szoftvertechnikak
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Szoftvertechnikák (2024-től)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Laborok
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Laborok
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. A modell és a kód kapcsolata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Nyelvi eszközök
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. A felhasználói felület kialakítása
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Többszálú alkalmazások készítése
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-tervezesi-mintak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Tervezési minták (kiterjeszthetőség)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Adatkezelés
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Önálló/házi feladatok
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Önálló/házi feladatok
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Útmutató
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/1-model-es-kod-kapcsolata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. HF - A modell és a kód kapcsolata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/2-nyelvi-eszkozok/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. HF - Nyelvi eszközök
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. HF - Felhasználói felület kialakítása
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. HF - Többszálú alkalmazások fejlesztése
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. HF - MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. HF - Tervezési minták
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HF - Liftrendszer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HF - MVVM receptek
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fejlesztőkörnyezet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    English course labs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            English course labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. The relationship between the model and the code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Language tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. The design of the user interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/index_eng.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-tervezesi-mintak/index_eng.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index_eng.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    None
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Homework
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Homework
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/1-model-es-kod-kapcsolata/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. HW - The relationship between the model and the code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/2-nyelvi-eszkozok/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. HW - Language tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. HW - Implementing the user interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. HW - Developing multithreaded applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. HW - MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. HW - Design patterns
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HW - Liftsystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IMSc HW - MVVM recipies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/index_eng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development environment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Deutschkurs-Labore
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Deutschkurs-Labore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-model-es-kod-kapcsolata/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Beziehung zwischen dem Modell und dem Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-nyelvi-eszkozok/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Sprachliche Mittel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-felhasznaloi-felulet/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entwurf der Benutzeroberfläche
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-tobbszalu/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Erstellung von mehrfädigen Anwendungen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-tervezesi-mintak/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Entwurfsmuster (Erweiterbarkeit)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    7. Datenverwaltung
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    7. Datenverwaltung
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#das-ziel-der-ubung" class="md-nav__link">
    <span class="md-ellipsis">
      Das Ziel der Übung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    <span class="md-ellipsis">
      Voraussetzungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#losung" class="md-nav__link">
    <span class="md-ellipsis">
      Lösung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einfuhrung" class="md-nav__link">
    <span class="md-ellipsis">
      Einführung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Einführung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adonet" class="md-nav__link">
    <span class="md-ellipsis">
      ADO.NET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#das-verbindungsbasierte-modell" class="md-nav__link">
    <span class="md-ellipsis">
      Das verbindungsbasierte Modell
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Das verbindungsbasierte Modell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection" class="md-nav__link">
    <span class="md-ellipsis">
      Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command" class="md-nav__link">
    <span class="md-ellipsis">
      Command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datareader" class="md-nav__link">
    <span class="md-ellipsis">
      DataReader
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-aufgabe-vorbereitung-der-datenbank" class="md-nav__link">
    <span class="md-ellipsis">
      1. Aufgabe - Vorbereitung der Datenbank
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-aufgabe-abfrage-mit-adonet-sqldatareader" class="md-nav__link">
    <span class="md-ellipsis">
      2. Aufgabe - Abfrage mit ADO.NET SqlDataReader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-aufgabe-einfugen-mit-sql-anweisung" class="md-nav__link">
    <span class="md-ellipsis">
      3. Aufgabe - Einfügen mit SQL-Anweisung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-aufgabe-modifikation-durch-gespeicherte-prozedur" class="md-nav__link">
    <span class="md-ellipsis">
      4. Aufgabe - Modifikation durch gespeicherte Prozedur
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-aufgabe-sql-injektion" class="md-nav__link">
    <span class="md-ellipsis">
      5. Aufgabe - SQL-Injektion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-aufgabe-loschen" class="md-nav__link">
    <span class="md-ellipsis">
      6. Aufgabe - Löschen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ausblick" class="md-nav__link">
    <span class="md-ellipsis">
      Ausblick
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hausaufgaben
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Hausaufgaben
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Beziehung zwischen dem Modell und dem Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Sprachliche Mittel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/3-felhasznaloi-felulet-kialakitasa/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Entwurf der Benutzeroberfläche
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/4-tobbszalu-alkalmazasok-fejlesztese/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Entwicklung von Multithreading-Anwendungen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/5-mvvm/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. MVVM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/meghirdetes-elott_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Entwurfsmuster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../hazi/fejlesztokornyezet/index_ger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entwicklungsumgebung
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tartalomjegyzék">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tartalomjegyzék
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#das-ziel-der-ubung" class="md-nav__link">
    <span class="md-ellipsis">
      Das Ziel der Übung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voraussetzungen" class="md-nav__link">
    <span class="md-ellipsis">
      Voraussetzungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#losung" class="md-nav__link">
    <span class="md-ellipsis">
      Lösung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einfuhrung" class="md-nav__link">
    <span class="md-ellipsis">
      Einführung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Einführung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adonet" class="md-nav__link">
    <span class="md-ellipsis">
      ADO.NET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#das-verbindungsbasierte-modell" class="md-nav__link">
    <span class="md-ellipsis">
      Das verbindungsbasierte Modell
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Das verbindungsbasierte Modell">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection" class="md-nav__link">
    <span class="md-ellipsis">
      Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command" class="md-nav__link">
    <span class="md-ellipsis">
      Command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datareader" class="md-nav__link">
    <span class="md-ellipsis">
      DataReader
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-aufgabe-vorbereitung-der-datenbank" class="md-nav__link">
    <span class="md-ellipsis">
      1. Aufgabe - Vorbereitung der Datenbank
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-aufgabe-abfrage-mit-adonet-sqldatareader" class="md-nav__link">
    <span class="md-ellipsis">
      2. Aufgabe - Abfrage mit ADO.NET SqlDataReader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-aufgabe-einfugen-mit-sql-anweisung" class="md-nav__link">
    <span class="md-ellipsis">
      3. Aufgabe - Einfügen mit SQL-Anweisung
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-aufgabe-modifikation-durch-gespeicherte-prozedur" class="md-nav__link">
    <span class="md-ellipsis">
      4. Aufgabe - Modifikation durch gespeicherte Prozedur
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-aufgabe-sql-injektion" class="md-nav__link">
    <span class="md-ellipsis">
      5. Aufgabe - SQL-Injektion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-aufgabe-loschen" class="md-nav__link">
    <span class="md-ellipsis">
      6. Aufgabe - Löschen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ausblick" class="md-nav__link">
    <span class="md-ellipsis">
      Ausblick
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/bmeviauab00/szoftvertechnikak/edit/master/docs/labor/7-adatkezeles/index_ger.md" title="Oldal szerkesztése" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="7-datenverwaltung">7. Datenverwaltung<a class="headerlink" href="#7-datenverwaltung" title="Permanent link">&para;</a></h1>
<h2 id="das-ziel-der-ubung">Das Ziel der Übung<a class="headerlink" href="#das-ziel-der-ubung" title="Permanent link">&para;</a></h2>
<p>Das Ziel der Übung ist, das Programmierungsmodell von ADO.NET zu erlernen und die häufigsten Datenverwaltungsprobleme und Fallstricke durch das Schreiben grundlegender CRUD-Operationen zu veranschaulichen.</p>
<p>Zugehörige Präsentationen: Datenverwaltung, ADO.NET-Grundlagen.</p>
<h2 id="voraussetzungen">Voraussetzungen<a class="headerlink" href="#voraussetzungen" title="Permanent link">&para;</a></h2>
<p>Die für die Durchführung der Übung benötigten Werkzeuge:</p>
<ul>
<li>Visual Studio 2022</li>
<li>Betriebssystem Windows 10 oder Windows 11</li>
<li>In dieser Übung werden wir den <em>SQL Server Object Explorer</em> in Visual Studio verwenden, um zwischen Datenbankobjekten zu navigieren und Abfragen auszuführen. Dazu ist möglicherweise die Komponente <em>SQL Server Data Tools</em> erforderlich, die am einfachsten auf der Seite <em>Individual Components</em> im Visual Studio Installer installiert wird, aber auch im Workload <em>Data Storage and Processing</em> enthalten ist.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Übung unter Linux oder Mac</p>
<p>Das Übungsmaterial ist grundsätzlich für Windows und Visual Studio gedacht, kann aber - auf eine etwas andere Weise - auch auf anderen Betriebssystemen durchgeführt werden, da das .NET SDK auch unter Linux und Mac unterstützt ist. Unter Linux:</p>
<ul>
<li>Verwenden Sie anstelle von Visual Studio einen Texteditor (z. B.: VSCode) und CLI-Tools.</li>
<li>Es gibt eine Linux-Version von SQL Server, und auf dem Mac kann er in Docker ausgeführt werden (aber Docker ist wahrscheinlich der bequemste Weg, um ihn auch unter Linux auszuführen).</li>
<li>Zur Visualisierung der Daten kann das ebenfalls plattformübergreifende Tool <em>Azure Data Studio</em> verwendet werden.</li>
</ul>
</div>
<h2 id="losung">Lösung<a class="headerlink" href="#losung" title="Permanent link">&para;</a></h2>
<details>
<summary>Laden Sie die fertige Lösung herunter</summary>
<p><img alt="❗" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2757.svg" title=":exclamation:" /> Es ist wichtig, dass Sie sich während des Praktikums an die Anleitung halten. Es ist verboten (und sinnlos), die fertige Lösung herunterzuladen. Allerdings kann es bei der anschließenden Selbsteinübung nützlich sein, die fertige Lösung zu überprüfen, daher stellen wir sie zur Verfügung.</p>
<p>Die Lösung ist auf GitHub <a href="https://github.com/bmeviauab00/lab-adatkezeles-megoldas">hier</a> verfügbar. Der einfachste Weg, es herunterzuladen, ist, es von der Kommandozeile aus mit dem Befehl <code>git clone</code> auf Ihren Computer zu klonen:</p>
<p><code>git clone https://github.com/bmeviauab00/lab-adatkezeles-megoldas</code></p>
<p>Sie müssen Git auf Ihrem Rechner installiert haben, weitere Informationen <a href="../../../hazi/git-github-github-classroom/#git-telepitese">hier</a>.</p>
</details>
<h2 id="einfuhrung">Einführung<a class="headerlink" href="#einfuhrung" title="Permanent link">&para;</a></h2>
<details class="warning">
<summary>Bemerkung für Übungsleiter/in</summary>
<p>Dieses Kapitel muss in der Übung nicht so ausführlich erklärt werden wie es geschrieben ist, aber die wichtigsten Begriffe sollten kurz erläutert werden.</p>
</details>
<h3 id="adonet">ADO.NET<a class="headerlink" href="#adonet" title="Permanent link">&para;</a></h3>
<p>Für die Datenbankverwaltung auf niedriger Ebene auf der .NET-Plattform ist ADO.NET verfügbar, mit dessen Hilfe relationale Datenbanken zugegriffen werden können.</p>
<p>Bei der Verwendung von ADO.NET können Sie zwei verschiedene Datenzugriffsmodelle verwenden:</p>
<ul>
<li>Verbindungsbasiertes Modell</li>
<li>Verbindungsloses Modell</li>
</ul>
<p>Wenn Sie auf die zwei Blöcke unten klicken, können Sie sich einen Überblick über die Grundsätze der zwei Modelle verschaffen.</p>
<details class="abstract">
<summary>Grungprinzipen der Verbindungsbasiertes Modell</summary>
<p>Die Idee ist, die Datenbankverbindung die ganze Zeit über offen zu halten, während die Daten abgefragt und geändert werden und die Änderungen dann in die Datenbank zurückgeschrieben werden. DataReader-Objekte können zur Lösung verwendet werden (siehe später). Der Vorteil dieser Lösung liegt in ihrer Einfachheit (einfacheres Programmierungsmodell und Konkurenzmanagement). Der Nachteil dieser Lösung ist, dass aufgrund der ständig offen gehaltene Netzwerkverbindung Skalierbarkeitsprobleme auftreten können. Dies bedeutet, dass bei einer großen Anzahl von gleichzeitigen Benutzerzugriffen auf den Dataverwalter eine große Anzahl von Datenbankverbindungen ständig aktiv ist, was eine kostspielige Ressource in Bezug auf die Leistung von Dataverwaltungssystemen darstellt. Daher ist es ratsam, während der Entwicklung zu versuchen, die Datenbankverbindungen so bald wie möglich zu schließen.</p>
<p>Vorteile des Modells:</p>
<ul>
<li>Einfachere Verwaltung des Wettbewerbs (Konkurenz)</li>
<li>Die Daten sind überall am neuesten</li>
</ul>
<p>Bemerkung: Diese Vorteile gelten nur, wenn der Datenverwalter für den Datenbankzugriff strikten Sperren benutzt - wir können dies mit dem Angabe des entsprechenden Transaktionsisolierungsgrades während des Zugriffs steuern. (Die Techniken dafür werden in späteren Studien beschrieben.)</p>
<p>Nachteile:</p>
<ul>
<li>Kontinuierliche Netzwerkverbindung</li>
<li>Mangelnde Skalierbarkeit</li>
</ul>
</details>
<details class="abstract">
<summary>Grungprinzipen der Verbindungsloses Modell</summary>
<p>Im Gegensatz zum verbindungsbasierten Modell wird keine Datenbankverbindung aufrechterhalten, wenn Daten angezeigt und im Speicher geändert werden. Die wichtigsten Schritte sind demnach folgende: Nach dem Aufbau der Verbindung und dem Abfrage der Daten wird die Verbindung sofort wieder geschlossen. Die Daten werden dann in der Regel angezeigt, und der Benutzer hat die Möglichkeit, die Daten zu ändern (Datensätze hinzuzufügen, zu ändern oder zu löschen, je nach Bedarf). Wenn wir Änderungen speichern, stellen wir die Datenverbindung wieder her, speichern die Änderungen in der Datenbank und schließen die Verbindung. Natürlich setzt das Modell voraus, dass wir zwischen der Abfrage der Daten und dem Zurüchschreiben der Änderungen - wenn wir keine Verbindung mit der Datenbank haben - die Daten und Änderungen im Speicher halten. Eine sehr bequeme Lösung dafür ist in der ADO.NET-Umgebung die Verwendung von <code>DataSet</code>-Objekten.</p>
<p>Vorteile des Modells:</p>
<ul>
<li>Keine ständige Netzwerkverbindung erforderlich</li>
<li>Skalierbarkeit</li>
</ul>
<p>Nachteile:</p>
<ul>
<li>Die Daten sind nicht immer am neuesten</li>
<li>Kollisionen sind möglich</li>
</ul>
<p>Bemerkung: Es gibt mehrere Möglichkeiten, Objekte und damit verbundene Änderungen im Speicher zu speichern. Das <code>DataSet</code> ist nur eine der möglichen Techniken. Sie können aber auch gewöhnliche Objekte und .NET-Technologien (z. B. Entity Framework Core) verwenden, die die Verwaltung dieser Objekte erleichtern und fortschrittlicher sind als ADO.NET.</p>
</details>
<h3 id="das-verbindungsbasierte-modell">Das verbindungsbasierte Modell<a class="headerlink" href="#das-verbindungsbasierte-modell" title="Permanent link">&para;</a></h3>
<p>Im Labor werden wir das verbindungsbasierte Modell kennenlernen.</p>
<p>Das grundlegende Verfahren ist wie folgt:</p>
<ol>
<li>Erstellen wir eine Verbindung zwischen der Anwendung und dem Datenbankmanagementsystem (mit dem Objekt <code>Connection</code>).</li>
<li>Erstellen wir die auszuführende SQL-Anweisung (unter Verwendung des Objekts <code>Command</code>).</li>
<li>Führen wir einen Befehl aus (unter Verwendung des Objekts <code>Command</code>).</li>
<li>Verarbeitung des zurückgegebenen Datensatzes für Abfragen (unter Verwendung des <code>DataReader</code>-Objekts). Für Modifikatorbefehle ist dies natürlich nicht notwendig.</li>
<li>Schließen der Verbindung.</li>
</ol>
<p>Wie oben zu sehen ist, hat die Kommunikation mit der Datenbank in diesem Modell drei Hauptkomponenten:</p>
<ul>
<li>Connection</li>
<li>Command</li>
<li>DataReader</li>
</ul>
<p>Diese Komponenten werden als Klasse dargestellt, deren datenbankunabhängiger Teil im BCL-Namensraum <em>System.Data.Common</em> unter Namen <code>DbConnection</code>, <code>DbCommand</code> und <code>DbDataReader</code> zu finden ist. Es handelt sich um abstrakte Klassen, und es ist die Aufgabe der Anbieter von Datenbankmanagern, Versionen zu schreiben, die bestimmte von ihnen abgeleitete Datenbankmanager unterstützen.</p>
<p>Alle drei ADO.NET-Komponenten unterstützen das <em>Dispose-Muster</em>, so dass sie im <code>using</code>-Block verwendet werden können - lassen wir uns sie auf diese Weise verwenden, wann immer wir können. Der Datenbankmanager befindet sich in der Regel auf einem anderen Rechner als der, auf dem unser Code läuft (nicht im Labor :)), also betrachten wir sie als entfernte Netzwerkressourcen.</p>
<p>Die Version, die Microsoft SQL Server unterstützt, finden wir im NuGet-Paket <em>Microsoft.Data.SqlClient</em> in Klassen mit dem Präfix "Sql" (<code>SqlConnection</code>, <code>SqlCommand</code> und <code>SqlDataReader</code>).</p>
<p>Andere Anbieter packen ihre eigene Version je in eine separate DLL(s), die daraus resultierende Komponente wird als <em>data provider</em> bezeichnet. Einige Beispiele ohne Anspruch auf Vollständigkeit:</p>
<ul>
<li><a href="https://www.npgsql.org/">PostgreSQL</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/standard/data/sqlite/?tabs=netcore-cli">SQLite</a> </li>
<li><a href="https://www.oracle.com/database/technologies/appdev/dotnet/odp.html">Oracle</a></li>
</ul>
<h4 id="connection">Connection<a class="headerlink" href="#connection" title="Permanent link">&para;</a></h4>
<p>Dies ist die Verbindung zwischen unserem Programm und dem Datenbankverwaltungssystem.
Um sie zu initialisieren, benötigen wir einen Verbindungsstring (connection string), der dem Treiber (driver) die notwendigen Informationen zum Aufbau der Verbindung gibt. Das interne Format variiert von Datenbankanbieter zu Datenbankanbieter <a href="http://www.connectionstrings.com">(weitere Informationen</a>).</p>
<p>Wenn eine neue <code>Connection</code> instanziiert wird, ist nicht garantiert, dass tatsächlich eine neue Verbindung zur Datenbank hergestellt wird. Die Treiber verwenden in der Regel Connection-Pooling, ähnlich wie Thread-Pooling, um frühere (derzeit nicht verwendete) Verbindungen wieder zu verwenden.</p>
<p><code>Connection</code> ist eine besonders teure, nicht verwaltete Ressource, daher muss <strong>sichergestellt werden, dass sie so schnell wie möglich geschlossen wird</strong>, wenn sie nicht mehr benötigt wird (z. B. durch den Aufruf von <code>Dispose()</code>, was in den meisten Fällen am einfachsten mit dem <code>using</code>-Block geschieht).</p>
<h4 id="command">Command<a class="headerlink" href="#command" title="Permanent link">&para;</a></h4>
<p>So können wir "Anweisungen" für den Datenbankmanager formulieren. Diese müssen wir in SQL bestimmen.
Für <code>Command</code> muss eine Verbindung eingestellt werden - hier wird der Befehl ausgeführt. Der Befehl kann verschiedene Ergebnisse haben, dementsprechend wird der Befehl mit verschiedenen Funktionen ausgeführt:</p>
<ul>
<li><strong>ExecuteReader</strong>: Abfrage einer Ergebnismenge (result set)</li>
<li><strong>ExecuteScalar</strong>: Abfrage des Skalar</li>
<li><strong>ExecuteNonQuery</strong>: Kein Rückgabewert (z.B: INSERT, UPDATE und DELETE), aber die Anzahl der von der Operation betroffenen Datensätze wird zurückgegeben</li>
</ul>
<h4 id="datareader">DataReader<a class="headerlink" href="#datareader" title="Permanent link">&para;</a></h4>
<p>Wenn das Ergebnis des Befehls eine Ergebnismenge ist, können wir diese Komponente verwenden, um die Daten zu lesen. Die Ergebnismenge kann als Tabelle angezeigt werden, <code>Data Reader</code> kann Zeile für Zeile (nur eine nach der anderen und vorwärts!) durch sie navigieren. Der Cursor befindet sich jeweils in einer Zeile. Sobald die gewünschten Daten aus der Zeile gelesen wurden, kann der Cursor eine Zeile weiterbewegt werden. Wir können nur aus der aktuellen Zeile lesen. Zu Beginn steht der Cursor nicht in der ersten Zeile, wir müssen ihn einmal bewegen, um ihn in die erste Zeile zu setzen.</p>
<p>Bemerkung: Die Navigation erfolgt im Speicher auf der Seite der Client, sie hat nichts mit den serverseitigen Cursors zu tun, die von jedem Datenverwaltern unterstützt werden.</p>
<h2 id="1-aufgabe-vorbereitung-der-datenbank">1. Aufgabe - Vorbereitung der Datenbank<a class="headerlink" href="#1-aufgabe-vorbereitung-der-datenbank" title="Permanent link">&para;</a></h2>
<p>Zuerst brauchen wir einen Datenbankmanager. In einer realen Umgebung wird dies durch voll funktionsfähige Datenbankmanager erreicht, die auf dedizierten Servern laufen und von Datenbankadministratoren überwacht werden. Während der Entwicklungszeit, für lokale Tests, ist es jedoch bequemer, einen Datenbankmanager für Entwickler zu verwenden.
Als Teil der Visual Studio-Installation erhalten wir eine solche Datenbank-Engine, LocalDB, die eine vereinfachte Version des voll funktionsfähigen SQL Servers ist. Seine Hauptmerkmale sind:</p>
<ul>
<li>kann nicht nur mit Visual Studio, sondern auch separat installiert werden,</li>
<li>die Datenbank-Engine ist fast vollständig kompatibel mit dem vollwertigen Microsoft SQL Server,</li>
<li>ist grundsätzlich auf dem Rechner verfügbar, auf dem es installiert ist,</li>
<li>mehrere Instanzen können bei Bedarf erstellt werden, die Instanzen stehen im Wesentlichen dem Benutzer des erstellenden Betriebssystems zur Verfügung (eine Instanz kann bei Bedarf von mehreren Benutzern gemeinsam genutzt werden),</li>
<li>für die Verwaltung eigener Instanzen (Erstellen, Löschen usw.) sind keine Administratorrechte erforderlich.</li>
</ul>
<details class="note">
<summary>ssqllocaldb Kommandozeilenwerkzeug</summary>
<p>In der Übung brauchen wir das nicht, aber wir können das <code>sqllocaldb</code> Kommandozeilenwerkzeug verwenden, um Instanzen zu verwalten.  Einige Befehle, die durch Eingabe nach <code>sqllocaldb</code> verwendet werden können:</p>
<table>
<thead>
<tr>
<th>Befehl</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>info</td>
<td>Liste der Instanzen, die für den aktuellen Benutzer sichtbar sind</td>
</tr>
<tr>
<td>create "locdb"</td>
<td>Erstellen einer neuen Instanz mit dem Namen "locdb"</td>
</tr>
<tr>
<td>delete "locdb"</td>
<td>Löschen der Instanz mit dem Namen "locdb"</td>
</tr>
<tr>
<td>start "locdb"</td>
<td>Starten der Instanz mit dem Namen "locdb"</td>
</tr>
<tr>
<td>stopp "locdb"</td>
<td>Stoppen der Instanz mit dem Namen "locdb"</td>
</tr>
</tbody>
</table>
</details>
<p>Visual Studio installiert und startet auch LocalDB-Instanzen, so dass es sich lohnt, zu überprüfen, was Visual Studio standardmäßig sieht.</p>
<ol>
<li>Starten Sie Visual Studio und wählen Sie SQL Server Object Explorer (SSOE) aus dem Menü Ansicht.</li>
<li>Öffnen Sie den SQL Server-Knoten. Wenn Sie andere Knoten darunter sehen, haben Sie einen erfolgreichen Fall, öffnen Sie einen davon (dadurch wird die Instanz gestartet, falls sie noch nicht gestartet ist, Sie müssen also möglicherweise etwas warten).</li>
<li>Wenn nichts erscheint, gibt der Befehl <code>mssqllocaldb info</code> in der Befehlszeile die vorhandenen Instanzen zurück. Klicken Sie mit der rechten Maustaste auf den Knoten SQL Server und wählen Sie <em>Add SQL Server</em>, dann geben Sie eine vorhandene Instanz an, z. B. <em>(localdb)MSSQLLocalDB</em></li>
<li>Wählen Sie im erscheinenden Knoten <em>Databases</em> die Option <em>New Database</em> und geben Sie einen Datenbanknamen ein. (Da in der Übungen mehrere Schüler denselben Betriebssystembenutzer verwenden können, empfiehlt es sich, den Neptun-Code als Namen zu verwenden).</li>
<li>Klicken Sie mit der rechten Maustaste auf den neuen Datenbankknoten und wählen Sie <em>New Query</em>, wodurch sich ein neues Abfragefenster öffnet.</li>
<li>Öffnen Sie oder laden herunter das <em>Northwind</em> <a href="../northwind.sql">Datenbankinitialisierungsskript</a>.</li>
<li>Kopieren Sie das vollständige Skript in das Abfragefenster.</li>
<li>Führen Sie das Skript aus, indem Sie auf den kleinen grünen Pfeil (<em>Execute</em>) klicken. Beobachten Sie darauf, dass <strong>die gute Datenbank (die in Schritt 4 oben erstellt wurde) oben im Abfragefenster in der Dropdown-Liste ausgewählt</strong> ist!</li>
<li>Prüfen Sie, ob Tabellen und Ansichten in unserer Datenbank erzeugt werden.</li>
<li>Sehen wir uns die wichtigsten Funktionen von SSOE an (Abruf von Daten aus Tabellen, Schemata usw.).</li>
</ol>
<div class="admonition note">
<p class="admonition-title">MSSQL-Verwaltungstools</p>
<p>In Visual Studio können Sie Datenbanken mit zwei Tools verwalten: dem Server Explorer und dem SQL Server Object Explorer. Ersteres ist ein allgemeineres Tool, das nicht nur Datenbanken, sondern auch andere Serverressourcen (z. B. Azure-Server) verwalten kann, während letzteres speziell auf die Datenbankverwaltung ausgerichtet ist. Auf beide kann über das Menü View zugegriffen werden, und beide bieten ähnliche Datenbankverwaltungsfunktionen, weshalb wir in dieser Übung nur einen (SQL Server Object Explorer) verwenden werden.</p>
<p>Wenn die Visual Studio-Entwicklungsumgebung nicht für unsere Verfügung steht, können wir das (kostenlose) SQL Server Management Studio oder das kostenlose und plattformübergreifende Azure Data Studio verwenden, um unsere Datenbank zu verwalten.</p>
</div>
<h2 id="2-aufgabe-abfrage-mit-adonet-sqldatareader">2. Aufgabe - Abfrage mit ADO.NET SqlDataReader<a class="headerlink" href="#2-aufgabe-abfrage-mit-adonet-sqldatareader" title="Permanent link">&para;</a></h2>
<p>Die Aufgabe ist eine C#-Konsolenanwendung zu erstellen, die die Datensätze der Northwind-Datenbanktabelle <code>Shippers</code> verwendet.</p>
<ol>
<li>
<p>Erstellen Sie eine Konsolenanwendung in C#. Der Projekttyp sollte <em>Console App</em> und <strong>NICHT</strong> <em>Console App (.NET Framework)</em> sein:</p>
<ul>
<li>Der Projektname sollte <em>AdoExample</em> lauten</li>
<li>Das Target Framework sollte <em>.NET 8</em> sein</li>
<li>Aktivieren Sie die Option <em>Do not use top-level statements</em> </li>
</ul>
</li>
<li>
<p>Suchen Sie die Verbindungsstring (connection string) aus der SSOE: Klicken Sie mit der rechten Maustaste auf unsere Datenbankverbindung (in der Abbildung unten rot markiert) / Properties.</p>
<p><a class="glightbox" href="../images/SSOS-database.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="SSOE Database" src="../images/SSOS-database.png" /></a></p>
</li>
<li>
<p>Kopieren Sie die Eigenschaft <em>Connection String</em> aus dem Fenster Properties in eine Variable der Klasse <code>Program</code>. </p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">ConnString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@&quot;Data Source=(localdb)MSSQLLocalDB;Initial Catalog=neptun;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False&quot;</span><span class="p">;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">SQL Server-Verbindungsstringformat</p>
<p>Bei MSSQL enthält das Verbindungsstrings Schlüssel-Wert Paare, die durch Semikolon getrennt sind.
Unter dem Schlüssel <code>Data Source</code> steht der Name der SQL-Server-Instanz und unter dem Schlüssel <code>Initial Catalog</code> der Name der Datenbank.
Die Option <code>Integrated Security=true</code> steht für die Windows-Authentifizierung.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">String mit @ (C# verbatim string)</p>
<p><code>@</code> ist ein Sonderzeichen (verbatim identifier), das hier verwendet wird, um zu vermeiden, dass das Backslash-Zeichen (<code>\</code>) in der Verbindungszeichenfolge als Escape-Zeichen interpretiert wird.</p>
</div>
</li>
<li>
<p>Fügen Sie das NuGet-Paket <code>Microsoft.Data.SqlClient</code> zum Projekt hinzu. Es gibt zwei Möglichkeiten, dies zu tun:</p>
<ul>
<li>A) in NuGet-Manager von Visual Studio:<ol>
<li>Auf dem Projekt rechte Taste / <em>Manage NuGet Packages</em>..., auf der erscheinenden Seite wechseln Sie zu <em>Browse</em>.</li>
<li>Geben Sie in das Suchfeld <em>Microsoft.Data.SqlClient</em>.</li>
<li>Wählen Sie im Feld <em>Version</em> die Version 5.0.1 aus (im Labor wählen wir diese Version, weil sie sich im NuGet-Cache auf den Rechnern befindet; für Üben zu Hause wählen Sie die <em>Latest stable</em> Version).</li>
</ol>
</li>
<li>
<p>B) Wir kopieren den folgenden Paketverweis in die Projektdatei:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;ItemGroup&gt;</span>
<span class="w">    </span><span class="nt">&lt;PackageReference</span><span class="w"> </span><span class="na">Include=</span><span class="s">&quot;Microsoft.Data.SqlClient&quot;</span><span class="w"> </span><span class="na">Version=</span><span class="s">&quot;5.0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/ItemGroup&gt;</span>
</code></pre></div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">NuGet Package Manager</p>
<p>NuGet ist ein Online-Paketverwaltungssystem, mit dem Sie externe Abhängigkeiten und Klassenbibliotheken in versionierter Form mit Ihren .NET-basierten Projekten verknüpfen können. Mehr Information über es war in der ersten Vorlesung.</p>
</div>
</li>
<li>
<p>Schreiben Sie eine Abfragefunktion, die alle Lieferer abfragt:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">GetShippers</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">))</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span><span class="s">&quot;SELECT ShipperID, CompanyName, Phone FROM Shippers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">conn</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;{0,-10}{1,-20}{2,-20}&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ShipperID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CompanyName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Phone&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="kt">string</span><span class="p">(</span><span class="sc">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">));</span>
<span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="p">(</span><span class="n">SqlDataReader</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteReader</span><span class="p">())</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="n">Read</span><span class="p">())</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span>
<span class="w">                    </span><span class="s">$&quot;{reader[&quot;</span><span class="n">ShipperID</span><span class="s">&quot;],-10}&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s">$&quot;{reader[&quot;</span><span class="n">CompanyName</span><span class="s">&quot;],-20}&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s">$&quot;{reader[&quot;</span><span class="n">Phone</span><span class="s">&quot;],-20}&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Das Verfahren des verbindungsbasierten Modells:</p>
<ul>
<li>Verbindung und Befehl initialisieren</li>
<li>Verbindung öffnen</li>
<li>Ausführen eines Befehls</li>
<li>Verarbeitung des Ergebnisses</li>
<li>Verbindung schließen, Reinigung</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Einige Bemerkungen zum Code</p>
<ul>
<li><code>DataReader</code>erhält man als Ergebnis der Ausführung des Befehls, nicht durch direkte Instanziierung</li>
<li>Die Verbindung muss vor der Ausführung des Befhels geöffnet werden.</li>
<li>Bei der Instanziierung von <code>DbConnection</code> wird die Verbindung nicht geöffnet (keine Netzwerkkommunikation)</li>
<li>Die Funktion <code>DataReader.Read()</code> zeigt an, ob noch Daten in der Ergebnismenge vorhanden sind</li>
<li>Sie können <code>DataReader</code> mit den Namen der Spalten in der Ergebnismenge indizieren - das Ergebnis wird <code>object</code> sein, wenn Sie also einen spezifischeren Typ benötigen, müssen Sie einen Cast durchführen</li>
<li>Der Compiler interpretiert den SQL-Befehlstext nicht (es ist nur ein String), nur die Datenbank tut dies, daher erhalten Sie im Falle eines SQL-Fehlers eine Laufzeitausnahme</li>
<li>Beachten Sie, dass, an wie viele Stellen im Code Strings manuell umgeschrieben werden soll, wenn sich das Datenbankschema ändert, z.B. nach der Umbenennung einer Spalte. </li>
<li>Mit <code>$</code> können Sie String-Interpolation verwenden, d. h. Ausdrücke einbetten, die direkt im String ausgewertet werden (C# 6-Fähigkeit). <code>$@</code> ermöglicht es Ihnen, mehrzeilige String-Interpolationsausdrücke zu schreiben (Sie müssen den Zeilenumbruch zwischen {} einfügen, sonst wird er in der Ausgabe angezeigt). Interessante Tatsache: Ab C# 8 können Sie $- und @-Zeichen in beliebiger Reihenfolge schreiben, daher sind auch <code>$@</code> und <code>@$</code> korrekt.</li>
<li>
<p>Das using-Schlüsselwort kann als einzeiliger Ausdruck anstelle einer Blockanweisung verwendet werden. In diesem Fall reicht das Ende des using-Blocks bis zum Ende des enthaltenden Blocks (in unserem Fall das Ende der Funktion). Dies reduziert die Anzahl der Einzüge, sollte aber seine Benutzung kein automatischer Reflex sein, da es sinnvoll sein kann, die Freigabe von Ressourcen früher als am Ende des enthaltenden Blocks zu erzwingen.</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">GetShippers</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">);</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span><span class="s">&quot;SELECT ShipperID, CompanyName, Phone FROM Shippers&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">conn</span><span class="p">);</span>

<span class="w">    </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;{0,-10}{1,-20}{2,-20}&quot;</span><span class="p">,</span><span class="s">&quot;ShipperID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;CompanyName&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Phone&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="kt">string</span><span class="p">(</span><span class="sc">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">));</span>

<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteReader</span><span class="p">();</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="n">Read</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span>
<span class="w">            </span><span class="s">$&quot;{reader[&quot;</span><span class="n">ShipperID</span><span class="s">&quot;],-10}&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="s">$&quot;{reader[&quot;</span><span class="n">CompanyName</span><span class="s">&quot;],-20}&quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="s">$&quot;{reader[&quot;</span><span class="n">Phone</span><span class="s">&quot;],-20}&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Diese Methode wird im Folgenden verwendet, um Einzüge und Klammern zu speichern.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rufen Sie unsere neue Funktion von <code>Main</code> aus auf.</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
<span class="hll"><span class="w">    </span><span class="n">GetShippers</span><span class="p">();</span>
</span><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Probieren wir die App aus. Wir sollten SQL zerstören und es auf diese Weise versuchen.</p>
</li>
</ol>
<h2 id="3-aufgabe-einfugen-mit-sql-anweisung">3. Aufgabe - Einfügen mit SQL-Anweisung<a class="headerlink" href="#3-aufgabe-einfugen-mit-sql-anweisung" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Schreiben Sie eine Funktion zum Einfügen eines neuen Lieferer in die Datenbank:</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">InsertShipper</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">companyName</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">phone</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">);</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;INSERT INTO Shippers(CompanyName, Phone) VALUES(@name,@phone)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">conn</span><span class="p">);</span>
<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">companyName</span><span class="p">);</span>
<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@phone&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">phone</span><span class="p">);</span>

<span class="w">    </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">affectedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteNonQuery</span><span class="p">();</span>

<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{affectedRows} rows affected&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Hier müssen wir solches SQL schreiben, für dessen Erstellung auch solche Variablenwerten verwendet werden, die wir von außen erhalten haben. Um die Zeichenkette zusammenzusetzen, hätten wir einfach den Operator für die Zeichenkettenverkettung, die Zeichenketteninterpolation oder <code>string.Format</code> verwenden können, aber das hat ein Sicherheitsrisiko (SQL Injection - siehe unten für weitere Details) - <strong>NIEMALS!!! darf SQL mit einer Zeichenkettenoperation zusammengesetzt werden</strong>. Stattdessen sollten wir SQL so schreiben, dass wir an die Stelle der Werte von Variablen, Parameterreferenzen setzen. Bei SQL Server lautet die Syntax des Verweises @parametername.</p>
<p>Um den Befehl auszuführen, müssen wir auch die Werte der Parameter an die Datenbank übergeben, da diese die Ersetzung der Werte für die Parameter vornimmt.</p>
<p>Die Ausgabe des Einfügebefehls ist keine Ergebnismenge, daher muss er mit <code>ExecuteNonQuery</code> ausgeführt werden, das die Anzahl der eingefügten Zeilen zurückgibt.</p>
</li>
<li>
<p>Rufen Sie unsere neue Funktion von <code>Main</code> aus auf.</p>
<div class="highlight"><pre><span></span><code><span class="n">GetShippers</span><span class="p">();</span>
<span class="hll"><span class="n">InsertShipper</span><span class="p">(</span><span class="s">&quot;Super Shipper&quot;</span><span class="p">,</span><span class="s">&quot;49-98562&quot;</span><span class="p">);</span>
</span><span class="hll"><span class="n">GetShippers</span><span class="p">();</span>
</span></code></pre></div>
</li>
<li>
<p>Probieren wir die Anwendung aus und prüfen wir in der Konsole und in der SSOE, ob die neue Zeile eingefügt wurde. Für eine schnelle und bequeme Überprüfung in SSOE wählen Sie <em>View Data</em> aus dem Kontextmenü der Tabelle <code>Shippers</code>. </p>
</li>
</ol>
<h2 id="4-aufgabe-modifikation-durch-gespeicherte-prozedur">4. Aufgabe - Modifikation durch gespeicherte Prozedur<a class="headerlink" href="#4-aufgabe-modifikation-durch-gespeicherte-prozedur" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Schauen Sie den Code des gespeicherten Verfahrens <code>Product_Update</code> in SSOE an. Öffnen Sie dazu den Knoten <em>Programmability</em> / <em>Stored Procedures</em>, und wählen Sie dann <em>View Code</em> aus dem Kontextmenü der gespeicherten Prozedur <code>Product_Update</code>. </p>
<div class="admonition note">
<p class="admonition-title">Programmcode in der Datenbank</p>
<p>Die großen Datenverwaltungssysteme bieten die Möglichkeit, Programmcode in der Datenbank des Datenverwalters selbst zu definieren. Diese werden als gespeicherte Verfahren bezeichnet. Die Sprache ist abhängig von der Datensteuerung, aber für MSSQL ist es T-SQL.</p>
<p>Heutzutage wird die Praxis, ernsthafte Geschäftslogik in die Datenbank zu packen, immer mehr aus der Industrie verdrängt, da der Werkzeugsatz dieser SQL-Dialekte nun viel begrenzter ist als der einer höheren Programmiersprache (C#, Java). Darüber hinaus wird die Testbarkeit des Systems durch die Verwendung von gespeicherten Prozeduren stark beeinträchtigt. Dennoch kann es manchmal sinnvoll sein, einen Teil der Logik in der Datenbank zu belassen, wenn wir den Vorteil nutzen wollen, dass unser Code in der Nähe der Daten läuft, z. B. wenn wir für eine einfache Massenpflege von Daten nicht über das Netz gehen wollen.</p>
</div>
</li>
<li>
<p>Schreiben Sie eine Funktion, die diese gespeicherte Prozedur aufruft</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">UpdateProduct</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">productID</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">productName</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">price</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">);</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span><span class="s">&quot;Product_Update&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">conn</span><span class="p">);</span>

<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">CommandType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CommandType</span><span class="p">.</span><span class="n">StoredProcedure</span><span class="p">;</span>

<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@ProductID&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">productID</span><span class="p">);</span>
<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@ProductName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">productName</span><span class="p">);</span>
<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@UnitPrice&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="p">);</span>

<span class="w">    </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">affectedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteNonQuery</span><span class="p">();</span>

<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{affectedRows} rows affected&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Der <code>Command</code> musste der Name der gespeicherten Prozedur gegeben werden und der Typ des Befehls musste geändert werden, ansonsten ist er strukturell ähnlich wie der vorherige Einfügecode.</p>
</li>
<li>
<p>Rufen Sie unsere neue Funktion von <code>Main</code> aus auf, z. B. mit den folgenden Parametern:</p>
<div class="highlight"><pre><span></span><code><span class="n">UpdateProduct</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MyProduct&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">50</span><span class="p">);</span>
</code></pre></div>
</li>
<li>
<p>Probieren wir die Anwendung aus und prüfen in der Konsole und in SSOE, ob das Produkt mit der ID 1 geändert wurde.</p>
</li>
</ol>
<h2 id="5-aufgabe-sql-injektion">5. Aufgabe - SQL-Injektion<a class="headerlink" href="#5-aufgabe-sql-injektion" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Schreiben wir die Einfügefunktion so, dass der SQL-Befehl mit Hilfe der String-Interpolation zusammengefügt wird.</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">InsertShipper2</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">companyName</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">phone</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">);</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span>
<span class="w">        </span><span class="s">$&quot;INSERT INTO Shippers(CompanyName, Phone) VALUES(&#39;{companyName}&#39;,&#39;{phone}&#39;)&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">conn</span><span class="p">);</span>

<span class="w">    </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">affectedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteNonQuery</span><span class="p">();</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{affectedRows} row(s) inserted&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Rufen Sie unsere neue Funktion von <code>Main</code> mit "speziellen" Parametern auf.</p>
<div class="highlight"><pre><span></span><code><span class="n">InsertShipper2</span><span class="p">(</span><span class="s">&quot;Super Shipper&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;49-98562&#39;); DELETE FROM Shippers;--&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Der zweite Parameter wird so gesetzt, dass die ursprüngliche Anweisung geschlossen wird, dann können wir beliebiges <strong>(!!!)</strong> SQL schreiben und schließlich den Rest der ursprünglichen Anweisung auskommentieren, (<code>--</code>).</p>
</li>
<li>
<p>Probieren Sie die Anwendung aus, sollten Sie einen Fehler erhalten, der angibt, dass ein Lieferant aufgrund eines Fremdschlüsselverweises nicht gelöscht werden kann.</p>
<p>Also <code>DELETE FROM</code> ist auch gelaufen! Prüfen wir mit dem Debugger (z. B. durch Anhalten bei der Anweisung <code>conn.Open</code> ), wie das endgültige SQL (<code>command.CommandText</code>) lautet.</p>
<p>Lehre gelernt:</p>
<ul>
<li>Fügen Sie SQL NIE programmatisch zusammen (egal mit welcher Methode), da dies Ihren Code für SQL-Injection-basierte Angriffe anfällig macht.</li>
<li>Die Datenbank sollte das endgültige SQL auf der Grundlage der SQL-Parameter zusammensetzen, denn dann ist gewährleistet, dass die Parameterwerte nicht als SQL interpretiert werden (selbst wenn SQL eingegeben wird). Verwenden Sie parametrisiertes SQL oder gespeicherte Prozeduren.</li>
<li>Verwenden Sie Datenbankbeschränkungen, z. B. zum Schutz vor versehentlichem Löschen.</li>
<li>Konfigurieren Sie Benutzer in der Datenbank mit unterschiedlichen Rechten. Der in der Verbindungszeichenfolge Ihres Programms angegebene Benutzer sollte nur die für den Betrieb erforderlichen Mindestrechte haben. In unserem Fall haben wir keinen Benutzer angegeben, wir werden uns als Windows-Benutzer verbinden.</li>
</ul>
</li>
<li>
<p>Rufen wir nun die ursprüngliche (d.h. die sichere, mit SQL-Parametern versehene) Einfügefunktion mit der "speziellen" Parametrisierung auf, um zu sehen, ob der Schutz funktioniert:</p>
<div class="highlight"><pre><span></span><code><span class="n">InsertShipper</span><span class="p">(</span><span class="s">&quot;Super Shipper&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;49-98562&#39;); DELETE FROM Shippers;--&quot;</span><span class="p">);</span>
<span class="n">InsertShipper</span><span class="p">(</span><span class="s">&quot;XXX&#39;);DELETE FROM Shippers;--&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;49-98562&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Der erste passt nicht in die Größenbeschränkung, der zweite läuft, aber nur ein "seltsam" benannter Anbieter ist enthalten. Der Parameterwert wurde tatsächlich als Wert und nicht als SQL interpretiert. Nicht so wie hier:</p>
<p><a class="glightbox" href="../images/xkcd-sql-injection.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="XKCD" src="../images/xkcd-sql-injection.png" /></a></p>
</li>
</ol>
<h2 id="6-aufgabe-loschen">6. Aufgabe - Löschen<a class="headerlink" href="#6-aufgabe-loschen" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Schreiben Sie eine neue Funktion zum Löschen eines bestimmten Lieferanten.</p>
<div class="highlight"><pre><span></span><code><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">DeleteShipper</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">shipperID</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlConnection</span><span class="p">(</span><span class="n">ConnString</span><span class="p">);</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SqlCommand</span><span class="p">(</span><span class="s">&quot;DELETE FROM Shippers WHERE ShipperID = @ShipperID&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">conn</span><span class="p">);</span>
<span class="w">    </span><span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">AddWithValue</span><span class="p">(</span><span class="s">&quot;@ShipperID&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">shipperID</span><span class="p">);</span>

<span class="w">    </span><span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">affectedRows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">ExecuteNonQuery</span><span class="p">();</span>

<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{affectedRows} row(s) affected&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Rufen wir unsere neue Funktion von <code>Main</code> auf, parametrisiert mit, sagen wir, 1.</p>
</li>
<li>Probieren wir die App aus. Sie werden wahrscheinlich eine Ausnahme erhalten, da ein Verweis (mit Fremdschlüssel-Beschränkung) auf den Datensatz besteht.</li>
<li>In SSOE suchen wir nach der ID eines Lieferanten, den wir beauftragt haben. Übergeben wir diesen Bezeichner an die Löschfunktion - sie kann ihn löschen, da es keinen Verweis auf ihn gibt.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Löschstrategien</p>
<p>Es zeigt sich, dass das Löschen aufgrund der Fremdschlüssel-Beschränkungen eine sehr riskante und unvorhersehbare Operation ist. Einige Möglichkeiten, die Löschung zu verwalten:</p>
<ul>
<li><strong>Wir erlauben keine Löschung</strong>: Wenn der zu löschende Datensatz referenziert ist, gibt die Datenbank einen Fehler zurück (wie oben gezeigt).</li>
<li><strong>Löschkaskade</strong> - die Fremdschlüssel-Beschränkung kann so eingestellt werden, dass der referenzierte Datensatz (die das Referenz auf die anderen hat) gelöscht wird, wenn der referenzierte Datensatz (wo das Referenz zeigt) gelöscht wird. Dies führt oft dazu, dass alle unsere Fremdschlüssel-Beschränkungen so aussehen, und eine (versehentliche) Löschung kann die gesamte Datenbank auslöschen, d.h. die Auswirkungen der Löschung sind schwer vorherzusagen.</li>
<li><strong>NULL der Referenz</strong> - die Fremdschlüssel-Beschränkung kann so eingestellt werden, dass das Fremdschlüsselfeld des referenzierten Datensatzes auf <code>NULL</code> gesetzt wird, wenn der referenzierte Datensatz gelöscht wird. Nur anwendbar, wenn das Fremdschlüsselfeld in Ihrem Modell auf <code>NULL</code> gesetzt werden kann.</li>
<li><strong>logisches Löschen</strong> (soft delete) - anstelle eines Löschvorgangs wird nur eine Flaggenspalte (z.B. <code>IsDeleted</code>) gesetzt. Der Vorteil ist, dass Sie sich nicht mit Fremdschlüssel-Beschränkungen befassen müssen und die gelöschten Daten bei Bedarf verfügbar sind (z. B. beim Rückgängigmachen des Löschvorgangs). Der Vorgang ist jedoch kompliziert, da man sich damit befassen muss, wie und wann gelöschte Datensätze gefiltert werden sollen (z. B. damit sie nicht in der Schnittstelle oder in der Statistik erscheinen) oder wie man damit umgeht, wenn ein nicht gelöschter Datensatz auf einen gelöschten Datensatz verweist.</li>
</ul>
</div>
<h2 id="ausblick">Ausblick<a class="headerlink" href="#ausblick" title="Permanent link">&para;</a></h2>
<p>Die oben genannten grundlegenden ADO.NET-Operationen in der hier gezeigten Form werden aus zwei Gründen selten verwendet (auch wenn dieser Ansatz die beste Leistung bietet):</p>
<ul>
<li>Schlechte Typisierung (das Einlesen der Daten eines Datensatzes in die Eigenschaften einer Klasse ist sehr umständlich, Cast usw.)</li>
<li>SQL kodiert in Strings (Fehler aufgrund von Tippfehlern werden erst zur Laufzeit erkannt)</li>
</ul>
<p>Ersteres kann durch verschiedene Komponenten gelöst werden, die ADO.NET ergänzen, wie z.B.:</p>
<ul>
<li><a href="https://github.com/DapperLib/Dapper">Dapper</a></li>
<li><a href="https://github.com/CollaboratingPlatypus/PetaPoco">PetaPoco</a></li>
</ul>
<p>Diese Lösungen bieten mehr Komfort bei minimalen Leistungseinbußen.</p>
<p>Beide Probleme werden durch ORM-Systeme (Object-Relational-Mapping) gelöst, die jedoch einen höheren Overhead haben als die oben genannten Lösungen. ORMs erstellen ein Mapping zwischen der Datenbank und unseren OO-Klassen und verwenden dieses Mapping, um Datenbankoperationen zu vereinfachen. Unsere in Typcode geschriebenen Operationen mit unseren Klassen werden automatisch in die entsprechenden Datenbankoperationen übersetzt, so dass unser In-Memory-Objektmodell mit der Datenbank synchronisiert wird. ORMs verwenden daher ein verbindungsloses Modell. Besser bekannte .NET ORMs:</p>
<ul>
<li>ADO.NET DataSet - ORM der ersten Generation, jetzt sehr selten verwendet</li>
<li>Entity Framework 6.x - das am häufigsten verwendete ORM-Framework im (alten) .NET Framework</li>
<li><a href="https://learn.microsoft.com/en-us/ef/core/">Entity Framework Core</a> (EF Core) - derzeit das wichtigste .NET ORM (Open Source)</li>
<li><a href="https://nhibernate.info/">NHibernate</a> - die .NET-Portierung von Hibernate für Java (Open Source)</li>
</ul>
<p>Das Entity Framework Core wird in der Spezialisierung <em>Adatvezérelt rendszerek</em> und im Wahlfach <em>Szoftverfejlesztés .NET platformon</em> ausführlicher behandelt.</p>
<hr>
<div class="md-source-file">
  <span class="md-source-file__fact"> <span class="md-icon" title="Utolsó frissítés"> <svg
        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z">
        </path>
      </svg>
    </span>
    <span title="2024. május 14. 16:03:59">
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="2024. május 14. 16:03:59"><span class="timeago" datetime="2024-05-14T16:03:59+02:00" locale="hu"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="2024. május 14. 16:03:59">2024-05-14</span>
    </span>
  </span>

  

  <span class="md-source-file__fact">
    <span class="md-icon" title="Szerzők">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z">
        </path>
      </svg>
    </span>
    <span>Szerzők</span>
    <nav><a href="https://github.com/bzolka" target="_blank" rel="noopener noreferrer" class="md-author" title="@Zoltán Benedek">
        <img src="https://avatars.githubusercontent.com/u/22932444?u=a3e164177137cbef68f0e72985785b0795ac7565&v=4?size=72" alt="@Zoltán Benedek">
      </a><a href="https://github.com/szucscintialia" target="_blank" rel="noopener noreferrer" class="md-author" title="@Cintia Szücs">
        <img src="https://avatars.githubusercontent.com/u/26093637?v=4?size=72" alt="@Cintia Szücs">
      </a></nav>      
  </span>
</div>




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Vissza a tetejére
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; BME VIK AUT
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.top", "search.suggest", "content.action.edit", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "V\u00e1g\u00f3lapra m\u00e1solva", "clipboard.copy": "M\u00e1sol\u00e1s v\u00e1g\u00f3lapra", "search.result.more.one": "1 tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.more.other": "# tov\u00e1bbi tal\u00e1lat az oldalon", "search.result.none": "Nincs tal\u00e1lat", "search.result.one": "1 egyez\u0151 dokumentum", "search.result.other": "# egyez\u0151 dokumentum", "search.result.placeholder": "Keres\u00e9shez \u00edrj ide valamit", "search.result.term.missing": "\u00dcres", "select.version": "Verzi\u00f3v\u00e1lt\u00e1s"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>